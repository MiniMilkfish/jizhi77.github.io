<!DOCTYPE html>
<html>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="description" content="作者ryanmcdermott根据Robert C. Martin《代码整洁之道》总结了适用于JavaScript的软件工程原则《Clean Code JavaScript》。本文是对其的翻译。 Original Repository: ryanmcdermott/clean-code-javascript 代码整洁之道目录 简介 变量 函数 对象和数据结构 类 健壮性 可测试性 并发性 容错性">
<meta name="keywords" content="代码">
<meta property="og:type" content="article">
<meta property="og:title" content="代码整洁之道">
<meta property="og:url" content="http://yoursite.com/posts/2017-02-13-cleancodejavascript/index.html">
<meta property="og:site_name" content="Hi, You Bad Boy">
<meta property="og:description" content="作者ryanmcdermott根据Robert C. Martin《代码整洁之道》总结了适用于JavaScript的软件工程原则《Clean Code JavaScript》。本文是对其的翻译。 Original Repository: ryanmcdermott/clean-code-javascript 代码整洁之道目录 简介 变量 函数 对象和数据结构 类 健壮性 可测试性 并发性 容错性">
<meta property="og:image" content="http://www.osnews.com/images/comics/wtfm.jpg">
<meta property="og:updated_time" content="2017-08-09T07:01:06.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="代码整洁之道">
<meta name="twitter:description" content="作者ryanmcdermott根据Robert C. Martin《代码整洁之道》总结了适用于JavaScript的软件工程原则《Clean Code JavaScript》。本文是对其的翻译。 Original Repository: ryanmcdermott/clean-code-javascript 代码整洁之道目录 简介 变量 函数 对象和数据结构 类 健壮性 可测试性 并发性 容错性">
<meta name="twitter:image" content="http://www.osnews.com/images/comics/wtfm.jpg">
    
    
        
          
              <link rel="shortcut icon" href="/images/favicon.ico">
          
        
        
          
            <link rel="icon" type="image/png" href="/images/favicon-192x192.png" sizes="192x192">
          
        
        
          
            <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
          
        
    
    <!-- title -->
    <title>代码整洁之道</title>
    <!-- styles -->
    <link rel="stylesheet" href="/css/style.css">
    <!-- rss -->
    
    
</head>

<body>
    
      <div id="header-post">
  <a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/archives/">Posts</a></li>
         
          <li><a href="/tags/">Tags</a></li>
         
          <li><a href="/about/">About</a></li>
        
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li><a class="icon" href="/posts/2017-02-15-cui1/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li>
        
        
        <li><a class="icon" href="/posts/2017-01-12-insertsort/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li>
        
        <li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li>
        <li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=http://yoursite.com/posts/2017-02-13-cleancodejavascript/"><i class="fa fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=http://yoursite.com/posts/2017-02-13-cleancodejavascript/&text=代码整洁之道"><i class="fa fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=http://yoursite.com/posts/2017-02-13-cleancodejavascript/&title=代码整洁之道"><i class="fa fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=http://yoursite.com/posts/2017-02-13-cleancodejavascript/&is_video=false&description=代码整洁之道"><i class="fa fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=代码整洁之道&body=Check out this article: http://yoursite.com/posts/2017-02-13-cleancodejavascript/"><i class="fa fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=http://yoursite.com/posts/2017-02-13-cleancodejavascript/&title=代码整洁之道"><i class="fa fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=http://yoursite.com/posts/2017-02-13-cleancodejavascript/&title=代码整洁之道"><i class="fa fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=http://yoursite.com/posts/2017-02-13-cleancodejavascript/&title=代码整洁之道"><i class="fa fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=http://yoursite.com/posts/2017-02-13-cleancodejavascript/&title=代码整洁之道"><i class="fa fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=http://yoursite.com/posts/2017-02-13-cleancodejavascript/&name=代码整洁之道&description="><i class="fa fa-tumblr " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#代码整洁之道"><span class="toc-number">1.</span> <span class="toc-text">代码整洁之道</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#目录"><span class="toc-number">1.0.1.</span> <span class="toc-text">目录</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#简介"><span class="toc-number">1.0.2.</span> <span class="toc-text">简介</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#变量"><span class="toc-number">1.0.3.</span> <span class="toc-text">变量</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#使用有意义且可读性好的变量命名"><span class="toc-number">1.1.</span> <span class="toc-text">使用有意义且可读性好的变量命名</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#对功能类似的变量名采用统一的命名风格"><span class="toc-number">1.2.</span> <span class="toc-text">对功能类似的变量名采用统一的命名风格</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#使用可检索的名字"><span class="toc-number">1.3.</span> <span class="toc-text">使用可检索的名字</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#使用解释性的变量命名"><span class="toc-number">1.4.</span> <span class="toc-text">使用解释性的变量命名</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#避免绕弯子"><span class="toc-number">1.5.</span> <span class="toc-text">避免绕弯子</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#避免重复描述"><span class="toc-number">1.6.</span> <span class="toc-text">避免重复描述</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#避免无意义的循环和条件判断"><span class="toc-number">1.7.</span> <span class="toc-text">避免无意义的循环和条件判断</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#函数"><span class="toc-number">1.7.1.</span> <span class="toc-text">函数</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#函数参数最多不超过两个"><span class="toc-number">1.8.</span> <span class="toc-text">函数参数最多不超过两个</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#保持函数功能单一性"><span class="toc-number">1.9.</span> <span class="toc-text">保持函数功能单一性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#函数命名应该突显出它的功能"><span class="toc-number">1.10.</span> <span class="toc-text">函数命名应该突显出它的功能</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Functions-should-only-be-one-level-of-abstraction"><span class="toc-number">1.11.</span> <span class="toc-text">Functions should only be one level of abstraction</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#保持函数只有一层抽象"><span class="toc-number">1.12.</span> <span class="toc-text">保持函数只有一层抽象</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#避免冗余代码"><span class="toc-number">1.13.</span> <span class="toc-text">避免冗余代码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#使用-Object-assign-设置对象属性"><span class="toc-number">1.14.</span> <span class="toc-text">使用 Object.assign 设置对象属性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#不要用标志位作为函数参数"><span class="toc-number">1.15.</span> <span class="toc-text">不要用标志位作为函数参数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#避免副作用-part-1"><span class="toc-number">1.16.</span> <span class="toc-text">避免副作用(part 1)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#避免副作用-part-2"><span class="toc-number">1.17.</span> <span class="toc-text">避免副作用 (part 2)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#不要写全局函数"><span class="toc-number">1.18.</span> <span class="toc-text">不要写全局函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#函数编程优于指令式编程"><span class="toc-number">1.19.</span> <span class="toc-text">函数编程优于指令式编程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#封装条件语句"><span class="toc-number">1.20.</span> <span class="toc-text">封装条件语句</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#避免否定情况的判断"><span class="toc-number">1.21.</span> <span class="toc-text">避免否定情况的判断</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#避免switch-case"><span class="toc-number">1.22.</span> <span class="toc-text">避免switch case</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#避免类型检测-part-1"><span class="toc-number">1.23.</span> <span class="toc-text">避免类型检测 (part 1)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#避免类型检测-part-2"><span class="toc-number">1.24.</span> <span class="toc-text">避免类型检测 (part 2)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#不要过度优化"><span class="toc-number">1.25.</span> <span class="toc-text">不要过度优化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#移除僵尸代码"><span class="toc-number">1.26.</span> <span class="toc-text">移除僵尸代码</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#对象和数据结构"><span class="toc-number">1.26.1.</span> <span class="toc-text">对象和数据结构</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Use-getters-and-setters"><span class="toc-number">1.27.</span> <span class="toc-text">Use getters and setters</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#让对象拥有私有成员"><span class="toc-number">1.28.</span> <span class="toc-text">让对象拥有私有成员</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#类"><span class="toc-number">1.28.1.</span> <span class="toc-text">类</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ES2015-ES6-类优先与-ES5-纯函数"><span class="toc-number">1.29.</span> <span class="toc-text">ES2015/ES6 类优先与 ES5 纯函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#使用方法链"><span class="toc-number">1.30.</span> <span class="toc-text">使用方法链</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#组合优先于继承"><span class="toc-number">1.31.</span> <span class="toc-text">组合优先于继承</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#健壮性"><span class="toc-number">1.31.1.</span> <span class="toc-text">健壮性</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#单一职责原则-SRP"><span class="toc-number">1.32.</span> <span class="toc-text">单一职责原则 (SRP)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#开闭原则-OCP"><span class="toc-number">1.33.</span> <span class="toc-text">开闭原则  (OCP)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Liskov替换原则-LSP"><span class="toc-number">1.34.</span> <span class="toc-text">Liskov替换原则 (LSP)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#接口隔离原则-ISP"><span class="toc-number">1.35.</span> <span class="toc-text">接口隔离原则 (ISP)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#依赖反转原则-DIP"><span class="toc-number">1.36.</span> <span class="toc-text">依赖反转原则 (DIP)</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#可测试性"><span class="toc-number">1.36.1.</span> <span class="toc-text">可测试性</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Single-concept-per-test"><span class="toc-number">1.37.</span> <span class="toc-text">Single concept per test</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#并发性"><span class="toc-number">1.37.1.</span> <span class="toc-text">并发性</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#使用-Promises而不是callback"><span class="toc-number">1.38.</span> <span class="toc-text">使用 Promises而不是callback</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Async-Await-比-Promises-更加简洁"><span class="toc-number">1.39.</span> <span class="toc-text">Async/Await 比 Promises 更加简洁</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#容错性"><span class="toc-number">1.39.1.</span> <span class="toc-text">容错性</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#不要忽略捕捉错误"><span class="toc-number">1.40.</span> <span class="toc-text">不要忽略捕捉错误</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#不要忽略被拒绝的-promise"><span class="toc-number">1.41.</span> <span class="toc-text">不要忽略被拒绝的 promise</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#格式化"><span class="toc-number">1.41.1.</span> <span class="toc-text">格式化</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#保持大小写一致"><span class="toc-number">1.42.</span> <span class="toc-text">保持大小写一致</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#函数的调用方与被调用方应该靠近"><span class="toc-number">1.43.</span> <span class="toc-text">函数的调用方与被调用方应该靠近</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#注释"><span class="toc-number">1.43.1.</span> <span class="toc-text">注释</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#仅仅对包含复杂业务逻辑的东西进行注释"><span class="toc-number">1.44.</span> <span class="toc-text">仅仅对包含复杂业务逻辑的东西进行注释</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#不要在代码库中保存注释掉的代码"><span class="toc-number">1.45.</span> <span class="toc-text">不要在代码库中保存注释掉的代码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#不要有日志式的评论"><span class="toc-number">1.46.</span> <span class="toc-text">不要有日志式的评论</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#避免不必要的占位符"><span class="toc-number">1.47.</span> <span class="toc-text">避免不必要的占位符</span></a></li></ol></li></ol>
    </div>
  </span>
</div>

    
    <div class="content index width mx-auto px2 my4">
        
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        代码整洁之道
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">Hi, You Bad Boy</span>
      </span>
      
    <div class="postdate">
        <time datetime="2017-02-12T16:00:00.000Z" itemprop="datePublished">2017-02-13</time>
    </div>


      
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/代码/">代码</a>
    </div>


    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <p>作者<a href="https://github.com/ryanmcdermott" target="_blank" rel="external">ryanmcdermott</a>根据Robert C. Martin<a href="https://www.amazon.com/Clean-Code-Handbook-Software-Craftsmanship/dp/0132350882" target="_blank" rel="external">《代码整洁之道》</a>总结了适用于JavaScript的软件工程原则<a href="https://github.com/ryanmcdermott/clean-code-javascript" target="_blank" rel="external">《Clean Code JavaScript》</a>。本文是对其的翻译。</p>
<p>Original Repository: <a href="https://github.com/ryanmcdermott/clean-code-javascript" target="_blank" rel="external">ryanmcdermott/clean-code-javascript</a></p>
<h2 id="代码整洁之道"><a href="#代码整洁之道" class="headerlink" title="代码整洁之道"></a>代码整洁之道</h2><h4 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h4><ol>
<li><a href="#简介">简介</a></li>
<li><a href="#变量">变量</a></li>
<li><a href="#函数">函数</a></li>
<li><a href="#对象和数据结构">对象和数据结构</a></li>
<li><a href="#类">类</a></li>
<li><a href="#健壮性">健壮性</a></li>
<li><a href="#可测试性">可测试性</a></li>
<li><a href="#并发性">并发性</a></li>
<li><a href="#容错性">容错性</a></li>
<li><a href="#格式化">格式化</a></li>
<li><a href="#注释">注释</a></li>
</ol>
<h4 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h4><blockquote>
<p>如下是一幅幽默的图片，该图片解释了代码review时每分钟的咒骂数是作为代码质量评测的唯一指标。</p>
</blockquote>
<p><img src="http://www.osnews.com/images/comics/wtfm.jpg" alt="Humorous image of software quality estimation as a count of how many expletives you shout when reading code"></p>
<p>这是根据Robert C. Martin<a href="https://www.amazon.com/Clean-Code-Handbook-Software-Craftsmanship/dp/0132350882" target="_blank" rel="external">《代码整洁之道》</a>总结的适用于JavaScript的软件工程原则<a href="https://github.com/ryanmcdermott/clean-code-javascript" target="_blank" rel="external">《Clean Code JavaScript》</a>。但并不代表就必须遵循这些原则，这只是一份如何写出可读可复用和可重构的生产代码的指导而已。</p>
<p>并不是在此处提到的所有的准则都必须被严格遵守，相反有时尽量少遵守一些会更好。这仅仅是一些作者经过多年的编码总结整理出来的经验而已。</p>
<p>软件工程仅仅有50多年的历史，至今仍在不断前进发展。只有当软件架构极度成熟的时候，这些原则或许才能被当做唯一准则去遵循。但现在，尝试着将这些指导当做你或者你的团队代码质量考核的标准之一吧。</p>
<p>另外：了解了这些并不能立刻使你成为一个优秀的软件开发人员，以他们为准则工作也并不能确保你在编码的过程中不会犯错。千里之行始于足下。我们应时常和同行们进行codereview。不要惧怕迈出提升自己的第一步，现在就从养成良好编码习惯开始吧！</p>
<h4 id="变量"><a href="#变量" class="headerlink" title="变量"></a><strong>变量</strong></h4><h3 id="使用有意义且可读性好的变量命名"><a href="#使用有意义且可读性好的变量命名" class="headerlink" title="使用有意义且可读性好的变量命名"></a>使用有意义且可读性好的变量命名</h3><p><strong>Bad:</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> yyyymmdstr = moment().format(<span class="string">'YYYY/MM/DD'</span>);</div></pre></td></tr></table></figure></p>
<p><strong>Good:</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> currentDate = moment().format(<span class="string">'YYYY/MM/DD'</span>);</div></pre></td></tr></table></figure></p>
<p><strong><a href="#目录">⬆ 返回目录</a></strong></p>
<p>使用ES6的const定义常量</p>
<p>反例中使用”var”定义的”常量”是可变的。</p>
<p>在声明一个常量时，该常量在整个程序中都应该是不可变的。</p>
<p><strong>Bad:</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> FIRST_US_PRESIDENT = <span class="string">"George Washington"</span>;</div></pre></td></tr></table></figure></p>
<p><strong>Good:</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> FIRST_US_PRESIDENT = <span class="string">"George Washington"</span>;</div></pre></td></tr></table></figure></p>
<p><strong><a href="#目录">⬆ 返回目录</a></strong></p>
<h3 id="对功能类似的变量名采用统一的命名风格"><a href="#对功能类似的变量名采用统一的命名风格" class="headerlink" title="对功能类似的变量名采用统一的命名风格"></a>对功能类似的变量名采用统一的命名风格</h3><p><strong>Bad:</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">getUserInfo();</div><div class="line">getClientData();</div><div class="line">getCustomerRecord();</div></pre></td></tr></table></figure></p>
<p><strong>Good:</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">getUser();</div></pre></td></tr></table></figure></p>
<p><strong><a href="#目录">⬆ 返回目录</a></strong></p>
<h3 id="使用可检索的名字"><a href="#使用可检索的名字" class="headerlink" title="使用可检索的名字"></a>使用可检索的名字</h3><p>我们需要阅读的代码远比我们要写的代码多得多。使代码拥有良好的可读性和可检索性非常重要。不按规则命名变量将是我们的代码晦涩难懂。类似<a href="https://github.com/danielstjules/buddy.js" target="_blank" rel="external">buddy.js</a> and<a href="https://github.com/eslint/eslint/blob/660e0918933e6e7fede26bc675a0763a6b357c94/docs/rules/no-magic-numbers.md" target="_blank" rel="external">ESLint</a>的工具可以帮助检测我们的命名是否规范。</p>
<p><strong>Bad:</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 谁知道86400 TM的到底是什么鬼？</span></div><div class="line">setTimeout(blastOff, <span class="number">86400000</span>);</div></pre></td></tr></table></figure></p>
<p><strong>Good:</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 用大写的const常量定义它</span></div><div class="line"><span class="keyword">const</span> MILLISECONDS_IN_A_DAY = <span class="number">86400000</span>;</div><div class="line">setTimeout(blastOff, MILLISECONDS_IN_A_DAY);</div></pre></td></tr></table></figure></p>
<p><strong><a href="#目录">⬆ 回到目录</a></strong></p>
<h3 id="使用解释性的变量命名"><a href="#使用解释性的变量命名" class="headerlink" title="使用解释性的变量命名"></a>使用解释性的变量命名</h3><p><strong>Bad:</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> address = <span class="string">'One Infinite Loop, Cupertino 95014'</span>;</div><div class="line"><span class="keyword">const</span> cityZipCodeRegex = <span class="regexp">/^[^,\\]+[,\\\s]+(.+?)\s*(\d&#123;5&#125;)?$/</span>;</div><div class="line">saveCityZipCode(address.match(cityZipCodeRegex)[<span class="number">1</span>], address.match(cityZipCodeRegex)[<span class="number">2</span>]);</div></pre></td></tr></table></figure></p>
<p><strong>Good:</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> address = <span class="string">'One Infinite Loop, Cupertino 95014'</span>;</div><div class="line"><span class="keyword">const</span> cityZipCodeRegex = <span class="regexp">/^[^,\\]+[,\\\s]+(.+?)\s*(\d&#123;5&#125;)?$/</span>;</div><div class="line"><span class="keyword">const</span> [, city, zipCode] = address.match(cityZipCodeRegex) || [];</div><div class="line">saveCityZipCode(city, zipCode);</div></pre></td></tr></table></figure></p>
<p><strong><a href="#目录">⬆ 回到目录</a></strong></p>
<h3 id="避免绕弯子"><a href="#避免绕弯子" class="headerlink" title="避免绕弯子"></a>避免绕弯子</h3><p>显示优于隐式。</p>
<p><strong>Bad:</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> locations = [<span class="string">'Austin'</span>, <span class="string">'New York'</span>, <span class="string">'San Francisco'</span>];</div><div class="line">locations.forEach(<span class="function">(<span class="params">l</span>) =&gt;</span> &#123;</div><div class="line">  doStuff();</div><div class="line">  doSomeOtherStuff();</div><div class="line">  <span class="comment">// ...</span></div><div class="line">  <span class="comment">// ...</span></div><div class="line">  <span class="comment">// ...</span></div><div class="line">  <span class="comment">// 等等，l是什么来着?</span></div><div class="line">  dispatch(l);</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<p><strong>Good:</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> locations = [<span class="string">'Austin'</span>, <span class="string">'New York'</span>, <span class="string">'San Francisco'</span>];</div><div class="line">locations.forEach(<span class="function">(<span class="params">location</span>) =&gt;</span> &#123;</div><div class="line">  doStuff();</div><div class="line">  doSomeOtherStuff();</div><div class="line">  <span class="comment">// ...</span></div><div class="line">  <span class="comment">// ...</span></div><div class="line">  <span class="comment">// ...</span></div><div class="line">  dispatch(location);</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<p><strong><a href="#目录">⬆ 回到目录</a></strong></p>
<h3 id="避免重复描述"><a href="#避免重复描述" class="headerlink" title="避免重复描述"></a>避免重复描述</h3><p>如果类名或者对象名已经描述清楚了，就不要再在变量命名上重复。</p>
<p><strong>Bad:</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> Car = &#123;</div><div class="line">  carMake: <span class="string">'Honda'</span>,</div><div class="line">  carModel: <span class="string">'Accord'</span>,</div><div class="line">  carColor: <span class="string">'Blue'</span></div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">paintCar</span>(<span class="params">car</span>) </span>&#123;</div><div class="line">  car.carColor = <span class="string">'Red'</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><strong>Good:</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> Car = &#123;</div><div class="line">  make: <span class="string">'Honda'</span>,</div><div class="line">  model: <span class="string">'Accord'</span>,</div><div class="line">  color: <span class="string">'Blue'</span></div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">paintCar</span>(<span class="params">car</span>) </span>&#123;</div><div class="line">  car.color = <span class="string">'Red'</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><strong><a href="#目录">⬆ 回到目录</a></strong></p>
<h3 id="避免无意义的循环和条件判断"><a href="#避免无意义的循环和条件判断" class="headerlink" title="避免无意义的循环和条件判断"></a>避免无意义的循环和条件判断</h3><p><strong>Bad:</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">createMicrobrewery</span>(<span class="params">name</span>) </span>&#123;</div><div class="line">  <span class="keyword">const</span> breweryName = name || <span class="string">'Hipster Brew Co.'</span>;</div><div class="line">  <span class="comment">// ...</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><strong>Good:</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">createMicrobrewery</span>(<span class="params">breweryName = <span class="string">'Hipster Brew Co.'</span></span>) </span>&#123;</div><div class="line">  <span class="comment">// ...</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<blockquote>
<p>相反我个人在写代码过程中却比较喜欢用短路运算代替条件判断，因为显得代码简洁，比如ajax接口容错处理中用<code>if(result.error &amp;&amp; (result.error.message || &quot;系统异常!&quot;))</code>，短路运算将多重判断简写为一行代码。<br><strong><a href="#目录">⬆ 回到目录</a></strong></p>
</blockquote>
<h4 id="函数"><a href="#函数" class="headerlink" title="函数"></a><strong>函数</strong></h4><h3 id="函数参数最多不超过两个"><a href="#函数参数最多不超过两个" class="headerlink" title="函数参数最多不超过两个"></a>函数参数最多不超过两个</h3><p>限制函数参数数量在测试过程中显得尤为重要。因为当函数参数个数超出3个以上时，参数异常组合将会倍增导致难于测试。</p>
<p>一到两个参数最为理想，三个应该尽量避免。</p>
<p>如果一个函数拥有超过两个参数那就意味着你想要做的有很多，这种情况下，将多个参数合成到一个对象里往往更为合适。</p>
<p><strong>Bad:</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">createMenu</span>(<span class="params">title, body, buttonText, cancellable</span>) </span>&#123;</div><div class="line">  <span class="comment">// ...</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><strong>Good:</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">createMenu</span>(<span class="params">&#123; title, body, buttonText, cancellable &#125;</span>) </span>&#123;</div><div class="line">  <span class="comment">// ...</span></div><div class="line">&#125;</div><div class="line"></div><div class="line">createMenu(&#123;</div><div class="line">  title: <span class="string">'Foo'</span>,</div><div class="line">  body: <span class="string">'Bar'</span>,</div><div class="line">  buttonText: <span class="string">'Baz'</span>,</div><div class="line">  cancellable: <span class="literal">true</span></div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<p><strong><a href="#目录">⬆ 回到目录</a></strong></p>
<h3 id="保持函数功能单一性"><a href="#保持函数功能单一性" class="headerlink" title="保持函数功能单一性"></a>保持函数功能单一性</h3><p>这是软件工程中是最为重要的一条准则。一个函数完成的功能越多越难于重构和测试。保持功能单一有助于代码重构并能保持代码更为整洁。</p>
<p><strong>Bad:</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">emailClients</span>(<span class="params">clients</span>) </span>&#123;</div><div class="line">  clients.forEach(<span class="function">(<span class="params">client</span>) =&gt;</span> &#123;</div><div class="line">    <span class="keyword">const</span> clientRecord = database.lookup(client);</div><div class="line">    <span class="keyword">if</span> (clientRecord.isActive()) &#123;</div><div class="line">      email(client);</div><div class="line">    &#125;</div><div class="line">  &#125;);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><strong>Good:</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">emailClients</span>(<span class="params">clients</span>) </span>&#123;</div><div class="line">  clients</div><div class="line">    .filter(isClientActive)</div><div class="line">    .forEach(email);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">isClientActive</span>(<span class="params">client</span>) </span>&#123;</div><div class="line">  <span class="keyword">const</span> clientRecord = database.lookup(client);</div><div class="line">  <span class="keyword">return</span> clientRecord.isActive();</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><strong><a href="#目录">⬆ 回到目录</a></strong></p>
<h3 id="函数命名应该突显出它的功能"><a href="#函数命名应该突显出它的功能" class="headerlink" title="函数命名应该突显出它的功能"></a>函数命名应该突显出它的功能</h3><p><strong>Bad:</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">addToDate</span>(<span class="params">date, month</span>) </span>&#123;</div><div class="line">  <span class="comment">// ...</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">const</span> date = <span class="keyword">new</span> <span class="built_in">Date</span>();</div><div class="line"></div><div class="line"><span class="comment">// 很难从函数名称看出是什么被添加进Date</span></div><div class="line">addToDate(date, <span class="number">1</span>);</div></pre></td></tr></table></figure></p>
<p><strong>Good:</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">addMonthToDate</span>(<span class="params">month, date</span>) </span>&#123;</div><div class="line">  <span class="comment">// ...</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">const</span> date = <span class="keyword">new</span> <span class="built_in">Date</span>();</div><div class="line">addMonthToDate(<span class="number">1</span>, date);</div></pre></td></tr></table></figure></p>
<p><strong><a href="#目录">⬆ 回到目录</a></strong></p>
<h3 id="Functions-should-only-be-one-level-of-abstraction"><a href="#Functions-should-only-be-one-level-of-abstraction" class="headerlink" title="Functions should only be one level of abstraction"></a>Functions should only be one level of abstraction</h3><h3 id="保持函数只有一层抽象"><a href="#保持函数只有一层抽象" class="headerlink" title="保持函数只有一层抽象"></a>保持函数只有一层抽象</h3><p>当在你的函数中有多于一个抽象级别时， 你的函数通常做了太多事情。 拆分函数将会提升重用性和测试性。</p>
<p><strong>Bad:</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">parseBetterJSAlternative</span>(<span class="params">code</span>) </span>&#123;</div><div class="line">  <span class="keyword">const</span> REGEXES = [</div><div class="line">    <span class="comment">// ...</span></div><div class="line">  ];</div><div class="line"></div><div class="line">  <span class="keyword">const</span> statements = code.split(<span class="string">' '</span>);</div><div class="line">  <span class="keyword">const</span> tokens = [];</div><div class="line">  REGEXES.forEach(<span class="function">(<span class="params">REGEX</span>) =&gt;</span> &#123;</div><div class="line">    statements.forEach(<span class="function">(<span class="params">statement</span>) =&gt;</span> &#123;</div><div class="line">      <span class="comment">// ...</span></div><div class="line">    &#125;);</div><div class="line">  &#125;);</div><div class="line"></div><div class="line">  <span class="keyword">const</span> ast = [];</div><div class="line">  tokens.forEach(<span class="function">(<span class="params">token</span>) =&gt;</span> &#123;</div><div class="line">    <span class="comment">// lex...</span></div><div class="line">  &#125;);</div><div class="line"></div><div class="line">  ast.forEach(<span class="function">(<span class="params">node</span>) =&gt;</span> &#123;</div><div class="line">    <span class="comment">// parse...</span></div><div class="line">  &#125;);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><strong>Good:</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">tokenize</span>(<span class="params">code</span>) </span>&#123;</div><div class="line">  <span class="keyword">const</span> REGEXES = [</div><div class="line">    <span class="comment">// ...</span></div><div class="line">  ];</div><div class="line"></div><div class="line">  <span class="keyword">const</span> statements = code.split(<span class="string">' '</span>);</div><div class="line">  <span class="keyword">const</span> tokens = [];</div><div class="line">  REGEXES.forEach(<span class="function">(<span class="params">REGEX</span>) =&gt;</span> &#123;</div><div class="line">    statements.forEach(<span class="function">(<span class="params">statement</span>) =&gt;</span> &#123;</div><div class="line">      tokens.push( <span class="comment">/* ... */</span> );</div><div class="line">    &#125;);</div><div class="line">  &#125;);</div><div class="line"></div><div class="line">  <span class="keyword">return</span> tokens;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">lexer</span>(<span class="params">tokens</span>) </span>&#123;</div><div class="line">  <span class="keyword">const</span> ast = [];</div><div class="line">  tokens.forEach(<span class="function">(<span class="params">token</span>) =&gt;</span> &#123;</div><div class="line">    ast.push( <span class="comment">/* ... */</span> );</div><div class="line">  &#125;);</div><div class="line"></div><div class="line">  <span class="keyword">return</span> ast;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">parseBetterJSAlternative</span>(<span class="params">code</span>) </span>&#123;</div><div class="line">  <span class="keyword">const</span> tokens = tokenize(code);</div><div class="line">  <span class="keyword">const</span> ast = lexer(tokens);</div><div class="line">  ast.forEach(<span class="function">(<span class="params">node</span>) =&gt;</span> &#123;</div><div class="line">    <span class="comment">// parse...</span></div><div class="line">  &#125;);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><strong><a href="#目录">⬆ 回到目录</a></strong></p>
<h3 id="避免冗余代码"><a href="#避免冗余代码" class="headerlink" title="避免冗余代码"></a>避免冗余代码</h3><p>竭尽全力避免冗余代码。 冗余代码是不好的， 因为它意味着当你需要修改一些逻辑时会有多个地方 需要修改。</p>
<p>想象一下你在经营一家餐馆， 你需要记录所有的库存西红柿， 洋葱， 大蒜， 各种香料等等。 如果你有多 个记录列表， 当你用西红柿做一道菜时你得更新多个列表。 如果你只有一个列表， 就只有一个地方需要更 新！</p>
<p>你有冗余代码通常是因为你有两个或多个稍微不同的东西， 它们共享大部分， 但是它们的不同之处迫使你使 用两个或更多独立的函数来处理大部分相同的东西。 移除冗余代码意味着创建一个可以处理这些不同之处的 抽象的函数/模块/类。</p>
<p>合理抽象很重要， 这是为什么要你遵循 Classes 那一章的 SOLID 的原因。 不好的抽象比冗余代码更差， 所以要谨慎行事。 既然已经这么说了， 如果你能够做出一个好的抽象， 才去做。 不要重复你自己， 否则你会发现当你要修改一个东西时时刻需要修改多个地方。</p>
<p><strong>Bad:</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">showDeveloperList</span>(<span class="params">developers</span>) </span>&#123;</div><div class="line">  developers.forEach(<span class="function">(<span class="params">developer</span>) =&gt;</span> &#123;</div><div class="line">    <span class="keyword">const</span> expectedSalary = developer.calculateExpectedSalary();</div><div class="line">    <span class="keyword">const</span> experience = developer.getExperience();</div><div class="line">    <span class="keyword">const</span> githubLink = developer.getGithubLink();</div><div class="line">    <span class="keyword">const</span> data = &#123;</div><div class="line">      expectedSalary,</div><div class="line">      experience,</div><div class="line">      githubLink</div><div class="line">    &#125;;</div><div class="line"></div><div class="line">    render(data);</div><div class="line">  &#125;);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">showManagerList</span>(<span class="params">managers</span>) </span>&#123;</div><div class="line">  managers.forEach(<span class="function">(<span class="params">manager</span>) =&gt;</span> &#123;</div><div class="line">    <span class="keyword">const</span> expectedSalary = manager.calculateExpectedSalary();</div><div class="line">    <span class="keyword">const</span> experience = manager.getExperience();</div><div class="line">    <span class="keyword">const</span> portfolio = manager.getMBAProjects();</div><div class="line">    <span class="keyword">const</span> data = &#123;</div><div class="line">      expectedSalary,</div><div class="line">      experience,</div><div class="line">      portfolio</div><div class="line">    &#125;;</div><div class="line"></div><div class="line">    render(data);</div><div class="line">  &#125;);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><strong>Good:</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">showEmployeeList</span>(<span class="params">employees</span>) </span>&#123;</div><div class="line">  employees.forEach(<span class="function">(<span class="params">employee</span>) =&gt;</span> &#123;</div><div class="line">    <span class="keyword">const</span> expectedSalary = employee.calculateExpectedSalary();</div><div class="line">    <span class="keyword">const</span> experience = employee.getExperience();</div><div class="line"></div><div class="line">    <span class="keyword">let</span> portfolio = employee.getGithubLink();</div><div class="line"></div><div class="line">    <span class="keyword">if</span> (employee.type === <span class="string">'manager'</span>) &#123;</div><div class="line">      portfolio = employee.getMBAProjects();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">const</span> data = &#123;</div><div class="line">      expectedSalary,</div><div class="line">      experience,</div><div class="line">      portfolio</div><div class="line">    &#125;;</div><div class="line"></div><div class="line">    render(data);</div><div class="line">  &#125;);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><strong><a href="#目录">⬆ 回到目录</a></strong></p>
<h3 id="使用-Object-assign-设置对象属性"><a href="#使用-Object-assign-设置对象属性" class="headerlink" title="使用 Object.assign 设置对象属性"></a>使用 Object.assign 设置对象属性</h3><p><strong>Bad:</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> menuConfig = &#123;</div><div class="line">  title: <span class="literal">null</span>,</div><div class="line">  body: <span class="string">'Bar'</span>,</div><div class="line">  buttonText: <span class="literal">null</span>,</div><div class="line">  cancellable: <span class="literal">true</span></div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">createMenu</span>(<span class="params">config</span>) </span>&#123;</div><div class="line">  config.title = config.title || <span class="string">'Foo'</span>;</div><div class="line">  config.body = config.body || <span class="string">'Bar'</span>;</div><div class="line">  config.buttonText = config.buttonText || <span class="string">'Baz'</span>;</div><div class="line">  config.cancellable = config.cancellable === <span class="literal">undefined</span> ? config.cancellable : <span class="literal">true</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line">createMenu(menuConfig);</div></pre></td></tr></table></figure></p>
<p><strong>Good:</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> menuConfig = &#123;</div><div class="line">  title: <span class="string">'Order'</span>,</div><div class="line">  <span class="comment">// User did not include 'body' key</span></div><div class="line">  buttonText: <span class="string">'Send'</span>,</div><div class="line">  cancellable: <span class="literal">true</span></div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">createMenu</span>(<span class="params">config</span>) </span>&#123;</div><div class="line">  config = <span class="built_in">Object</span>.assign(&#123;</div><div class="line">    title: <span class="string">'Foo'</span>,</div><div class="line">    body: <span class="string">'Bar'</span>,</div><div class="line">    buttonText: <span class="string">'Baz'</span>,</div><div class="line">    cancellable: <span class="literal">true</span></div><div class="line">  &#125;, config);</div><div class="line"></div><div class="line">  <span class="comment">// config now equals: &#123;title: "Order", body: "Bar", buttonText: "Send", cancellable: true&#125;</span></div><div class="line">  <span class="comment">// ...</span></div><div class="line">&#125;</div><div class="line"></div><div class="line">createMenu(menuConfig);</div></pre></td></tr></table></figure></p>
<p><strong><a href="#目录">⬆ 回到目录</a></strong></p>
<h3 id="不要用标志位作为函数参数"><a href="#不要用标志位作为函数参数" class="headerlink" title="不要用标志位作为函数参数"></a>不要用标志位作为函数参数</h3><p>这通常意味着函数的功能的单一性已经被破坏。此时应考虑对函数进行再次划分。</p>
<p><strong>Bad:</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">createFile</span>(<span class="params">name, temp</span>) </span>&#123;</div><div class="line">  <span class="keyword">if</span> (temp) &#123;</div><div class="line">    fs.create(<span class="string">`./temp/<span class="subst">$&#123;name&#125;</span>`</span>);</div><div class="line">  &#125; <span class="keyword">else</span> &#123;</div><div class="line">    fs.create(name);</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><strong>Good:</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">createFile</span>(<span class="params">name</span>) </span>&#123;</div><div class="line">  fs.create(name);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">createTempFile</span>(<span class="params">name</span>) </span>&#123;</div><div class="line">  createFile(<span class="string">`./temp/<span class="subst">$&#123;name&#125;</span>`</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><strong><a href="#目录">⬆ 回到目录</a></strong></p>
<h3 id="避免副作用-part-1"><a href="#避免副作用-part-1" class="headerlink" title="避免副作用(part 1)"></a>避免副作用(part 1)</h3><p>当函数产生了除了“接受一个值并返回一个结果”之外的行为时，称该函数产生了副作用。比如写文件、修改全局变量或将你的钱全转给了一个陌生人等。</p>
<p>程序在某些情况下确实需要副作用这一行为，如先前例子中的写文件。这时应该将这些功能集中在一起，不要用多个函数/类修改某个文件。用且只用一个service完成这一需求。</p>
<p>重点是避免这些常见的易犯的错误， 比如在对象之间共享状态而不使用任何结构， 使用任何地方都可以写入 的可变的数据类型， 没有集中化导致副作用。</p>
<p><strong>Bad:</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Global variable referenced by following function.</span></div><div class="line"><span class="comment">// If we had another function that used this name, now it'd be an array and it could break it.</span></div><div class="line"><span class="keyword">let</span> name = <span class="string">'Ryan McDermott'</span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">splitIntoFirstAndLastName</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  name = name.split(<span class="string">' '</span>);</div><div class="line">&#125;</div><div class="line"></div><div class="line">splitIntoFirstAndLastName();</div><div class="line"></div><div class="line"><span class="built_in">console</span>.log(name); <span class="comment">// ['Ryan', 'McDermott'];</span></div></pre></td></tr></table></figure></p>
<p><strong>Good:</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">splitIntoFirstAndLastName</span>(<span class="params">name</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> name.split(<span class="string">' '</span>);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">const</span> name = <span class="string">'Ryan McDermott'</span>;</div><div class="line"><span class="keyword">const</span> newName = splitIntoFirstAndLastName(name);</div><div class="line"></div><div class="line"><span class="built_in">console</span>.log(name); <span class="comment">// 'Ryan McDermott';</span></div><div class="line"><span class="built_in">console</span>.log(newName); <span class="comment">// ['Ryan', 'McDermott'];</span></div></pre></td></tr></table></figure></p>
<p><strong><a href="#目录">⬆ 回到目录</a></strong></p>
<h3 id="避免副作用-part-2"><a href="#避免副作用-part-2" class="headerlink" title="避免副作用 (part 2)"></a>避免副作用 (part 2)</h3><p><strong>Bad:</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> addItemToCart = <span class="function">(<span class="params">cart, item</span>) =&gt;</span> &#123;</div><div class="line">  cart.push(&#123; item, <span class="attr">date</span>: <span class="built_in">Date</span>.now() &#125;);</div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<p><strong>Good:</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> addItemToCart = <span class="function">(<span class="params">cart, item</span>) =&gt;</span> &#123;</div><div class="line">  <span class="keyword">return</span> [...cart, &#123; item, <span class="attr">date</span> : <span class="built_in">Date</span>.now() &#125;];</div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<p><strong><a href="#目录">⬆ 回到目录</a></strong></p>
<h3 id="不要写全局函数"><a href="#不要写全局函数" class="headerlink" title="不要写全局函数"></a>不要写全局函数</h3><p>在JS中污染全局是一个非常不好的实践，这么做可能和其他库起冲突，且调用你的API的用户在实际环境中得到一个exception前对这一情况是一无所知的。</p>
<p>想象以下例子：如果你想扩展JS中的Array，为其添加一个diff函数显示两个数组间的差异，此时应如何去做？你可以将diff写入Array.prototype，但这么做会和其他有类似需求的库造成冲突。如果另一个库对diff的需求为比较一个数组中首尾元素间的差异呢？</p>
<p>使用ES6中的class对全局的Array做简单的扩展显然是一个更棒的选择。</p>
<p><strong>Bad:</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">Array</span>.prototype.diff = <span class="function"><span class="keyword">function</span> <span class="title">diff</span>(<span class="params">comparisonArray</span>) </span>&#123;</div><div class="line">  <span class="keyword">const</span> hash = <span class="keyword">new</span> <span class="built_in">Set</span>(comparisonArray);</div><div class="line">  <span class="keyword">return</span> <span class="keyword">this</span>.filter(<span class="function"><span class="params">elem</span> =&gt;</span> !hash.has(elem));</div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<p><strong>Good:</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">SuperArray</span> <span class="keyword">extends</span> <span class="title">Array</span> </span>&#123;</div><div class="line">  diff(comparisonArray) &#123;</div><div class="line">    <span class="keyword">const</span> hash = <span class="keyword">new</span> <span class="built_in">Set</span>(comparisonArray);</div><div class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.filter(<span class="function"><span class="params">elem</span> =&gt;</span> !hash.has(elem));</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><strong><a href="#目录">⬆ 回到目录</a></strong></p>
<h3 id="函数编程优于指令式编程"><a href="#函数编程优于指令式编程" class="headerlink" title="函数编程优于指令式编程"></a>函数编程优于指令式编程</h3><p>JavaScript 不是 Haskell 那种方式的函数式语言， 但是它有它的函数式风格。 函数式语言更加简洁 并且更容易进行测试， 当你可以使用函数式编程风格时请尽情使用。<br><strong>Bad:</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> programmerOutput = [</div><div class="line">  &#123;</div><div class="line">    name: <span class="string">'Uncle Bobby'</span>,</div><div class="line">    linesOfCode: <span class="number">500</span></div><div class="line">  &#125;, &#123;</div><div class="line">    name: <span class="string">'Suzie Q'</span>,</div><div class="line">    linesOfCode: <span class="number">1500</span></div><div class="line">  &#125;, &#123;</div><div class="line">    name: <span class="string">'Jimmy Gosling'</span>,</div><div class="line">    linesOfCode: <span class="number">150</span></div><div class="line">  &#125;, &#123;</div><div class="line">    name: <span class="string">'Gracie Hopper'</span>,</div><div class="line">    linesOfCode: <span class="number">1000</span></div><div class="line">  &#125;</div><div class="line">];</div><div class="line"></div><div class="line"><span class="keyword">let</span> totalOutput = <span class="number">0</span>;</div><div class="line"></div><div class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; programmerOutput.length; i++) &#123;</div><div class="line">  totalOutput += programmerOutput[i].linesOfCode;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><strong>Good:</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> programmerOutput = [</div><div class="line">  &#123;</div><div class="line">    name: <span class="string">'Uncle Bobby'</span>,</div><div class="line">    linesOfCode: <span class="number">500</span></div><div class="line">  &#125;, &#123;</div><div class="line">    name: <span class="string">'Suzie Q'</span>,</div><div class="line">    linesOfCode: <span class="number">1500</span></div><div class="line">  &#125;, &#123;</div><div class="line">    name: <span class="string">'Jimmy Gosling'</span>,</div><div class="line">    linesOfCode: <span class="number">150</span></div><div class="line">  &#125;, &#123;</div><div class="line">    name: <span class="string">'Gracie Hopper'</span>,</div><div class="line">    linesOfCode: <span class="number">1000</span></div><div class="line">  &#125;</div><div class="line">];</div><div class="line"></div><div class="line"><span class="keyword">const</span> INITIAL_VALUE = <span class="number">0</span>;</div><div class="line"></div><div class="line"><span class="keyword">const</span> totalOutput = programmerOutput</div><div class="line">  .map(<span class="function">(<span class="params">programmer</span>) =&gt;</span> programmer.linesOfCode)</div><div class="line">  .reduce(<span class="function">(<span class="params">acc, linesOfCode</span>) =&gt;</span> acc + linesOfCode, INITIAL_VALUE);</div></pre></td></tr></table></figure></p>
<p><strong><a href="#目录">⬆ 回到目录</a></strong></p>
<h3 id="封装条件语句"><a href="#封装条件语句" class="headerlink" title="封装条件语句"></a>封装条件语句</h3><p><strong>Bad:</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> (fsm.state === <span class="string">'fetching'</span> &amp;&amp; isEmpty(listNode)) &#123;</div><div class="line">  <span class="comment">// ...</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><strong>Good:</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">shouldShowSpinner</span>(<span class="params">fsm, listNode</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> fsm.state === <span class="string">'fetching'</span> &amp;&amp; isEmpty(listNode);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">if</span> (shouldShowSpinner(fsmInstance, listNodeInstance)) &#123;</div><div class="line">  <span class="comment">// ...</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><strong><a href="#目录">⬆ 回到目录</a></strong></p>
<h3 id="避免否定情况的判断"><a href="#避免否定情况的判断" class="headerlink" title="避免否定情况的判断"></a>避免否定情况的判断</h3><p><strong>Bad:</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">isDOMNodeNotPresent</span>(<span class="params">node</span>) </span>&#123;</div><div class="line">  <span class="comment">// ...</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">if</span> (!isDOMNodeNotPresent(node)) &#123;</div><div class="line">  <span class="comment">// ...</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><strong>Good:</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">isDOMNodePresent</span>(<span class="params">node</span>) </span>&#123;</div><div class="line">  <span class="comment">// ...</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">if</span> (isDOMNodePresent(node)) &#123;</div><div class="line">  <span class="comment">// ...</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><strong><a href="#目录">⬆ 回到目录</a></strong></p>
<h3 id="避免switch-case"><a href="#避免switch-case" class="headerlink" title="避免switch case"></a>避免switch case</h3><p>这一条至少目前来看，我是避免不了了。</p>
<p><strong>Bad:</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Airplane</span> </span>&#123;</div><div class="line">  <span class="comment">// ...</span></div><div class="line">  getCruisingAltitude() &#123;</div><div class="line">    <span class="keyword">switch</span> (<span class="keyword">this</span>.type) &#123;</div><div class="line">      <span class="keyword">case</span> <span class="string">'777'</span>:</div><div class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.getMaxAltitude() - <span class="keyword">this</span>.getPassengerCount();</div><div class="line">      <span class="keyword">case</span> <span class="string">'Air Force One'</span>:</div><div class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.getMaxAltitude();</div><div class="line">      <span class="keyword">case</span> <span class="string">'Cessna'</span>:</div><div class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.getMaxAltitude() - <span class="keyword">this</span>.getFuelExpenditure();</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><strong>Good:</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Airplane</span> </span>&#123;</div><div class="line">  <span class="comment">// ...</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Boeing777</span> <span class="keyword">extends</span> <span class="title">Airplane</span> </span>&#123;</div><div class="line">  <span class="comment">// ...</span></div><div class="line">  getCruisingAltitude() &#123;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.getMaxAltitude() - <span class="keyword">this</span>.getPassengerCount();</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">AirForceOne</span> <span class="keyword">extends</span> <span class="title">Airplane</span> </span>&#123;</div><div class="line">  <span class="comment">// ...</span></div><div class="line">  getCruisingAltitude() &#123;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.getMaxAltitude();</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Cessna</span> <span class="keyword">extends</span> <span class="title">Airplane</span> </span>&#123;</div><div class="line">  <span class="comment">// ...</span></div><div class="line">  getCruisingAltitude() &#123;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.getMaxAltitude() - <span class="keyword">this</span>.getFuelExpenditure();</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><strong><a href="#目录">⬆ 回到目录</a></strong></p>
<h3 id="避免类型检测-part-1"><a href="#避免类型检测-part-1" class="headerlink" title="避免类型检测 (part 1)"></a>避免类型检测 (part 1)</h3><p>JavaScript 是无类型的， 这意味着你的函数能接受任何类型的参数。 但是有时又会被这种自由咬伤， 于是又尝试在你的函数中做类型检查。 有很多种方式来避免这个， 第一个要考虑的是一致的 API 。</p>
<p><strong>Bad:</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">travelToTexas</span>(<span class="params">vehicle</span>) </span>&#123;</div><div class="line">  <span class="keyword">if</span> (vehicle <span class="keyword">instanceof</span> Bicycle) &#123;</div><div class="line">    vehicle.pedal(<span class="keyword">this</span>.currentLocation, <span class="keyword">new</span> Location(<span class="string">'texas'</span>));</div><div class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (vehicle <span class="keyword">instanceof</span> Car) &#123;</div><div class="line">    vehicle.drive(<span class="keyword">this</span>.currentLocation, <span class="keyword">new</span> Location(<span class="string">'texas'</span>));</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><strong>Good:</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">travelToTexas</span>(<span class="params">vehicle</span>) </span>&#123;</div><div class="line">  vehicle.move(<span class="keyword">this</span>.currentLocation, <span class="keyword">new</span> Location(<span class="string">'texas'</span>));</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><strong><a href="#目录">⬆ 回到目录</a></strong></p>
<h3 id="避免类型检测-part-2"><a href="#避免类型检测-part-2" class="headerlink" title="避免类型检测 (part 2)"></a>避免类型检测 (part 2)</h3><p>如果你使用原始的字符串、 整数和数组， 并且你不能使用多态， 但是你依然感觉到有类型检查的需要， 你应该考虑使用 TypeScript 。 它是一个常规 JavaScript 的优秀的替代品， 因为它在标准的 JavaScript 语法之上为你提供静态类型。 对常规 JavaScript 做人工类型检查的问题是需要大量的冗词来仿造类型安 全而不缺失可读性。 保持你的 JavaScript 简洁， 编写良好的测试， 并有良好的代码审阅， 否则使用 TypeScript （就像我说的， 它是一个伟大的替代品）来完成这些。</p>
<p><strong>Bad:</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">combine</span>(<span class="params">val1, val2</span>) </span>&#123;</div><div class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> val1 === <span class="string">'number'</span> &amp;&amp; <span class="keyword">typeof</span> val2 === <span class="string">'number'</span> ||</div><div class="line">      <span class="keyword">typeof</span> val1 === <span class="string">'string'</span> &amp;&amp; <span class="keyword">typeof</span> val2 === <span class="string">'string'</span>) &#123;</div><div class="line">    <span class="keyword">return</span> val1 + val2;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'Must be of type String or Number'</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><strong>Good:</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">combine</span>(<span class="params">val1, val2</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> val1 + val2;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><strong><a href="#目录">⬆ 回到目录</a></strong></p>
<h3 id="不要过度优化"><a href="#不要过度优化" class="headerlink" title="不要过度优化"></a>不要过度优化</h3><p>有些优化对于执行环境来说(浏览器等)根本不值一提，花时间在值得优化的地方。</p>
<p><strong>Bad:</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="comment">// 这里使用变量len是因为在老式浏览器中，</span></div><div class="line"><span class="comment">// 直接使用正例中的方式会导致每次循环均重复计算list.length的值，</span></div><div class="line"><span class="comment">// 而在现代浏览器中会自动完成优化，这一行为是没有必要的</span></div><div class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>, len = list.length; i &lt; len; i++) &#123;</div><div class="line">  <span class="comment">// ...</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><strong>Good:</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; list.length; i++) &#123;</div><div class="line">  <span class="comment">// ...</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>不得不说我一直写上面Bad示例的代码而且以为很高明！</p>
<p><strong><a href="#目录">⬆ 回到目录</a></strong></p>
<h3 id="移除僵尸代码"><a href="#移除僵尸代码" class="headerlink" title="移除僵尸代码"></a>移除僵尸代码</h3><p>僵死代码和冗余代码同样糟糕。 没有理由在代码库中保存它。 如果它不会被调用， 就删掉它。 当你需要 它时， 它依然保存在版本历史记录中。</p>
<p><strong>Bad:</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">oldRequestModule</span>(<span class="params">url</span>) </span>&#123;</div><div class="line">  <span class="comment">// ...</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">newRequestModule</span>(<span class="params">url</span>) </span>&#123;</div><div class="line">  <span class="comment">// ...</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">const</span> req = newRequestModule;</div><div class="line">inventoryTracker(<span class="string">'apples'</span>, req, <span class="string">'www.inventory-awesome.io'</span>);</div></pre></td></tr></table></figure></p>
<p><strong>Good:</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">newRequestModule</span>(<span class="params">url</span>) </span>&#123;</div><div class="line">  <span class="comment">// ...</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">const</span> req = newRequestModule;</div><div class="line">inventoryTracker(<span class="string">'apples'</span>, req, <span class="string">'www.inventory-awesome.io'</span>);</div></pre></td></tr></table></figure></p>
<p><strong><a href="#目录">⬆ 回到目录</a></strong></p>
<h4 id="对象和数据结构"><a href="#对象和数据结构" class="headerlink" title="对象和数据结构"></a><strong>对象和数据结构</strong></h4><h3 id="Use-getters-and-setters"><a href="#Use-getters-and-setters" class="headerlink" title="Use getters and setters"></a>Use getters and setters</h3><p>JavaScript 没有接口或类型， 所以坚持这个模式是非常困难的， 因为我们没有 public 和 private 关键字。 正因为如此， 使用 getters 和 setters 来访问对象上的数据比简单的在一个对象上查找属性 要好得多。 “为什么？” 你可能会问， 好吧， 原因请看下面的列表：</p>
<ul>
<li>当你想在获取一个对象属性的背后做更多的事情时， 你不需要在代码库中查找和修改每一处访问；</li>
<li>使用 set 可以让添加验证变得容易；</li>
<li>封装内部实现；</li>
<li>使用 getting 和 setting 时， 容易添加日志和错误处理；</li>
<li>继承这个类， 你可以重写默认功能；</li>
<li>你可以延迟加载对象的属性， 比如说从服务器获取。</li>
</ul>
<p><strong>Bad:</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">makeBankAccount</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="comment">// ...</span></div><div class="line"></div><div class="line">  <span class="keyword">return</span> &#123;</div><div class="line">    balance: <span class="number">0</span>,</div><div class="line">    <span class="comment">// ...</span></div><div class="line">  &#125;;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">const</span> account = makeBankAccount();</div><div class="line">account.balance = <span class="number">100</span>;</div></pre></td></tr></table></figure></p>
<p><strong>Good:</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">makeBankAccount</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="comment">// this one is private</span></div><div class="line">  <span class="keyword">let</span> balance = <span class="number">0</span>;</div><div class="line"></div><div class="line">  <span class="comment">// a "getter", made public via the returned object below</span></div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">getBalance</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> balance;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="comment">// a "setter", made public via the returned object below</span></div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">setBalance</span>(<span class="params">amount</span>) </span>&#123;</div><div class="line">    <span class="comment">// ... validate before updating the balance</span></div><div class="line">    balance = amount;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="keyword">return</span> &#123;</div><div class="line">    <span class="comment">// ...</span></div><div class="line">    getBalance,</div><div class="line">    setBalance,</div><div class="line">  &#125;;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">const</span> account = makeBankAccount();</div><div class="line">account.setBalance(<span class="number">100</span>);</div></pre></td></tr></table></figure></p>
<p><strong><a href="#目录">⬆ 回到目录</a></strong></p>
<h3 id="让对象拥有私有成员"><a href="#让对象拥有私有成员" class="headerlink" title="让对象拥有私有成员"></a>让对象拥有私有成员</h3><p>可以通过闭包完成。</p>
<p><strong>Bad:</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">const</span> Employee = <span class="function"><span class="keyword">function</span>(<span class="params">name</span>) </span>&#123;</div><div class="line">  <span class="keyword">this</span>.name = name;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">Employee.prototype.getName = <span class="function"><span class="keyword">function</span> <span class="title">getName</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> <span class="keyword">this</span>.name;</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="keyword">const</span> employee = <span class="keyword">new</span> Employee(<span class="string">'John Doe'</span>);</div><div class="line"><span class="built_in">console</span>.log(<span class="string">`Employee name: <span class="subst">$&#123;employee.getName()&#125;</span>`</span>); <span class="comment">// Employee name: John Doe</span></div><div class="line"><span class="keyword">delete</span> employee.name;</div><div class="line"><span class="built_in">console</span>.log(<span class="string">`Employee name: <span class="subst">$&#123;employee.getName()&#125;</span>`</span>); <span class="comment">// Employee name: undefined</span></div></pre></td></tr></table></figure></p>
<p><strong>Good:</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">makeEmployee</span>(<span class="params">name</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> &#123;</div><div class="line">    getName() &#123;</div><div class="line">      <span class="keyword">return</span> name;</div><div class="line">    &#125;,</div><div class="line">  &#125;;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">const</span> employee = makeEmployee(<span class="string">'John Doe'</span>);</div><div class="line"><span class="built_in">console</span>.log(<span class="string">`Employee name: <span class="subst">$&#123;employee.getName()&#125;</span>`</span>); <span class="comment">// Employee name: John Doe</span></div><div class="line"><span class="keyword">delete</span> employee.name;</div><div class="line"><span class="built_in">console</span>.log(<span class="string">`Employee name: <span class="subst">$&#123;employee.getName()&#125;</span>`</span>); <span class="comment">// Employee name: John Doe</span></div></pre></td></tr></table></figure></p>
<p><strong><a href="#目录">⬆ 回到目录</a></strong></p>
<h4 id="类"><a href="#类" class="headerlink" title="类"></a><strong>类</strong></h4><h3 id="ES2015-ES6-类优先与-ES5-纯函数"><a href="#ES2015-ES6-类优先与-ES5-纯函数" class="headerlink" title="ES2015/ES6 类优先与 ES5 纯函数"></a>ES2015/ES6 类优先与 ES5 纯函数</h3><p>很难为经典的 ES5 类创建可读的的继承、 构造和方法定义。 如果你需要继承（并且感到奇怪为啥你不需 要）， 则优先用 ES2015/ES6的类。 不过， 短小的函数优先于类， 知道你发现你需要更大并且更复杂的 对象。</p>
<p><strong>Bad:</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> Animal = <span class="function"><span class="keyword">function</span>(<span class="params">age</span>) </span>&#123;</div><div class="line">  <span class="keyword">if</span> (!(<span class="keyword">this</span> <span class="keyword">instanceof</span> Animal)) &#123;</div><div class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'Instantiate Animal with `new`'</span>);</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="keyword">this</span>.age = age;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">Animal.prototype.move = <span class="function"><span class="keyword">function</span> <span class="title">move</span>(<span class="params"></span>) </span>&#123;&#125;;</div><div class="line"></div><div class="line"><span class="keyword">const</span> Mammal = <span class="function"><span class="keyword">function</span>(<span class="params">age, furColor</span>) </span>&#123;</div><div class="line">  <span class="keyword">if</span> (!(<span class="keyword">this</span> <span class="keyword">instanceof</span> Mammal)) &#123;</div><div class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'Instantiate Mammal with `new`'</span>);</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  Animal.call(<span class="keyword">this</span>, age);</div><div class="line">  <span class="keyword">this</span>.furColor = furColor;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">Mammal.prototype = <span class="built_in">Object</span>.create(Animal.prototype);</div><div class="line">Mammal.prototype.constructor = Mammal;</div><div class="line">Mammal.prototype.liveBirth = <span class="function"><span class="keyword">function</span> <span class="title">liveBirth</span>(<span class="params"></span>) </span>&#123;&#125;;</div><div class="line"></div><div class="line"><span class="keyword">const</span> Human = <span class="function"><span class="keyword">function</span>(<span class="params">age, furColor, languageSpoken</span>) </span>&#123;</div><div class="line">  <span class="keyword">if</span> (!(<span class="keyword">this</span> <span class="keyword">instanceof</span> Human)) &#123;</div><div class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'Instantiate Human with `new`'</span>);</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  Mammal.call(<span class="keyword">this</span>, age, furColor);</div><div class="line">  <span class="keyword">this</span>.languageSpoken = languageSpoken;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">Human.prototype = <span class="built_in">Object</span>.create(Mammal.prototype);</div><div class="line">Human.prototype.constructor = Human;</div><div class="line">Human.prototype.speak = <span class="function"><span class="keyword">function</span> <span class="title">speak</span>(<span class="params"></span>) </span>&#123;&#125;;</div></pre></td></tr></table></figure></p>
<p><strong>Good:</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Animal</span> </span>&#123;</div><div class="line">  <span class="keyword">constructor</span>(age) &#123;</div><div class="line">    <span class="keyword">this</span>.age = age;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  move() &#123; <span class="comment">/* ... */</span> &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Mammal</span> <span class="keyword">extends</span> <span class="title">Animal</span> </span>&#123;</div><div class="line">  <span class="keyword">constructor</span>(age, furColor) &#123;</div><div class="line">    <span class="keyword">super</span>(age);</div><div class="line">    <span class="keyword">this</span>.furColor = furColor;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  liveBirth() &#123; <span class="comment">/* ... */</span> &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Human</span> <span class="keyword">extends</span> <span class="title">Mammal</span> </span>&#123;</div><div class="line">  <span class="keyword">constructor</span>(age, furColor, languageSpoken) &#123;</div><div class="line">    <span class="keyword">super</span>(age, furColor);</div><div class="line">    <span class="keyword">this</span>.languageSpoken = languageSpoken;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  speak() &#123; <span class="comment">/* ... */</span> &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><strong><a href="#目录">⬆ 回到目录</a></strong></p>
<h3 id="使用方法链"><a href="#使用方法链" class="headerlink" title="使用方法链"></a>使用方法链</h3><p>这个模式在 JavaScript 中是非常有用的， 并且你可以在许多类库比如 jQuery 和 Lodash 中见到。 它允许你的代码变得富有表现力， 并减少啰嗦。 因为这个原因， 我说， 使用方法链然后再看看你的代码 会变得多么简洁。 在你的类／方法中， 简单的在每个方法的最后返回 this ， 然后你就能把这个类的 其它方法链在一起。</p>
<p><strong>Bad:</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Car</span> </span>&#123;</div><div class="line">  <span class="keyword">constructor</span>() &#123;</div><div class="line">    <span class="keyword">this</span>.make = <span class="string">'Honda'</span>;</div><div class="line">    <span class="keyword">this</span>.model = <span class="string">'Accord'</span>;</div><div class="line">    <span class="keyword">this</span>.color = <span class="string">'white'</span>;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  setMake(make) &#123;</div><div class="line">    <span class="keyword">this</span>.make = make;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  setModel(model) &#123;</div><div class="line">    <span class="keyword">this</span>.model = model;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  setColor(color) &#123;</div><div class="line">    <span class="keyword">this</span>.color = color;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  save() &#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.make, <span class="keyword">this</span>.model, <span class="keyword">this</span>.color);</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">const</span> car = <span class="keyword">new</span> Car();</div><div class="line">car.setColor(<span class="string">'pink'</span>);</div><div class="line">car.setMake(<span class="string">'Ford'</span>);</div><div class="line">car.setModel(<span class="string">'F-150'</span>);</div><div class="line">car.save();</div></pre></td></tr></table></figure></p>
<p><strong>Good:</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Car</span> </span>&#123;</div><div class="line">  <span class="keyword">constructor</span>() &#123;</div><div class="line">    <span class="keyword">this</span>.make = <span class="string">'Honda'</span>;</div><div class="line">    <span class="keyword">this</span>.model = <span class="string">'Accord'</span>;</div><div class="line">    <span class="keyword">this</span>.color = <span class="string">'white'</span>;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  setMake(make) &#123;</div><div class="line">    <span class="keyword">this</span>.make = make;</div><div class="line">    <span class="comment">// <span class="doctag">NOTE:</span> Returning this for chaining</span></div><div class="line">    <span class="keyword">return</span> <span class="keyword">this</span>;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  setModel(model) &#123;</div><div class="line">    <span class="keyword">this</span>.model = model;</div><div class="line">    <span class="comment">// <span class="doctag">NOTE:</span> Returning this for chaining</span></div><div class="line">    <span class="keyword">return</span> <span class="keyword">this</span>;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  setColor(color) &#123;</div><div class="line">    <span class="keyword">this</span>.color = color;</div><div class="line">    <span class="comment">// <span class="doctag">NOTE:</span> Returning this for chaining</span></div><div class="line">    <span class="keyword">return</span> <span class="keyword">this</span>;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  save() &#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.make, <span class="keyword">this</span>.model, <span class="keyword">this</span>.color);</div><div class="line">    <span class="comment">// <span class="doctag">NOTE:</span> Returning this for chaining</span></div><div class="line">    <span class="keyword">return</span> <span class="keyword">this</span>;</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">const</span> car = <span class="keyword">new</span> Car()</div><div class="line">  .setColor(<span class="string">'pink'</span>)</div><div class="line">  .setMake(<span class="string">'Ford'</span>)</div><div class="line">  .setModel(<span class="string">'F-150'</span>)</div><div class="line">  .save();</div></pre></td></tr></table></figure></p>
<p><strong><a href="#目录">⬆ 回到目录</a></strong></p>
<h3 id="组合优先于继承"><a href="#组合优先于继承" class="headerlink" title="组合优先于继承"></a>组合优先于继承</h3><p>正如 <a href="https://en.wikipedia.org/wiki/Design_Patterns" target="_blank" rel="external"><em>设计模式四人帮</em></a>所述， 如果可能， 你应该优先使用组合而不是继承。 有许多好的理由去使用继承， 也有许多好的理由去使用组合。这个格言 的重点是， 如果你本能的观点是继承， 那么请想一下组合能否更好的为你的问题建模。 很多情况下它真的 可以。</p>
<p>那么你也许会这样想， “我什么时候改使用继承？” 这取决于你手上的问题， 不过这儿有一个像样的列表说 明什么时候继承比组合更好用：</p>
<ol>
<li>你的继承表示”是一个”的关系而不是”有一个”的关系（人类-&gt;动物 vs 用户-&gt;用户详情）；</li>
<li>你可以重用来自基类的代码（人可以像所有动物一样行动）；</li>
<li>你想通过基类对子类进行全局的修改（改变所有动物行动时的热量消耗）；</li>
</ol>
<p><strong>Bad:</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Employee</span> </span>&#123;</div><div class="line">  <span class="keyword">constructor</span>(name, email) &#123;</div><div class="line">    <span class="keyword">this</span>.name = name;</div><div class="line">    <span class="keyword">this</span>.email = email;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="comment">// ...</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// Bad because Employees "have" tax data. EmployeeTaxData is not a type of Employee</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">EmployeeTaxData</span> <span class="keyword">extends</span> <span class="title">Employee</span> </span>&#123;</div><div class="line">  <span class="keyword">constructor</span>(ssn, salary) &#123;</div><div class="line">    <span class="keyword">super</span>();</div><div class="line">    <span class="keyword">this</span>.ssn = ssn;</div><div class="line">    <span class="keyword">this</span>.salary = salary;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="comment">// ...</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><strong>Good:</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">EmployeeTaxData</span> </span>&#123;</div><div class="line">  <span class="keyword">constructor</span>(ssn, salary) &#123;</div><div class="line">    <span class="keyword">this</span>.ssn = ssn;</div><div class="line">    <span class="keyword">this</span>.salary = salary;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="comment">// ...</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Employee</span> </span>&#123;</div><div class="line">  <span class="keyword">constructor</span>(name, email) &#123;</div><div class="line">    <span class="keyword">this</span>.name = name;</div><div class="line">    <span class="keyword">this</span>.email = email;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  setTaxData(ssn, salary) &#123;</div><div class="line">    <span class="keyword">this</span>.taxData = <span class="keyword">new</span> EmployeeTaxData(ssn, salary);</div><div class="line">  &#125;</div><div class="line">  <span class="comment">// ...</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><strong><a href="#目录">⬆ 回到目录</a></strong></p>
<h4 id="健壮性"><a href="#健壮性" class="headerlink" title="健壮性"></a><strong>健壮性</strong></h4><h3 id="单一职责原则-SRP"><a href="#单一职责原则-SRP" class="headerlink" title="单一职责原则 (SRP)"></a>单一职责原则 (SRP)</h3><p>正如代码整洁之道所述， “永远不要有超过一个理由来修改一个类”。 给一个类塞满许多功能， 就像你在航 班上只能带一个行李箱一样，这样做的问题你的类不会有理想的内聚性，将会有太多的理由来对它进行修改。 最小化需要修改一个类的次数时很重要的， 因为如果一个类拥有太多的功能， 一旦你修改它的一小部分，将<br>会很难弄清楚会对代码库中的其它模块造成什么影响。</p>
<p><strong>Bad:</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">UserSettings</span> </span>&#123;</div><div class="line">  <span class="keyword">constructor</span>(user) &#123;</div><div class="line">    <span class="keyword">this</span>.user = user;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  changeSettings(settings) &#123;</div><div class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.verifyCredentials()) &#123;</div><div class="line">      <span class="comment">// ...</span></div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  verifyCredentials() &#123;</div><div class="line">    <span class="comment">// ...</span></div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><strong>Good:</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">UserAuth</span> </span>&#123;</div><div class="line">  <span class="keyword">constructor</span>(user) &#123;</div><div class="line">    <span class="keyword">this</span>.user = user;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  verifyCredentials() &#123;</div><div class="line">    <span class="comment">// ...</span></div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">UserSettings</span> </span>&#123;</div><div class="line">  <span class="keyword">constructor</span>(user) &#123;</div><div class="line">    <span class="keyword">this</span>.user = user;</div><div class="line">    <span class="keyword">this</span>.auth = <span class="keyword">new</span> UserAuth(user);</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  changeSettings(settings) &#123;</div><div class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.auth.verifyCredentials()) &#123;</div><div class="line">      <span class="comment">// ...</span></div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><strong><a href="#目录">⬆ 回到目录</a></strong></p>
<h3 id="开闭原则-OCP"><a href="#开闭原则-OCP" class="headerlink" title="开闭原则  (OCP)"></a>开闭原则  (OCP)</h3><p>Bertrand Meyer 说过， “软件实体 (类， 模块， 函数等) 应该为扩展开放， 但是为修改关闭。” 这 是什么意思呢？ 这个原则基本上说明了你应该允许用户添加功能而不必修改现有的代码。</p>
<p><strong>Bad:</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">AjaxAdapter</span> <span class="keyword">extends</span> <span class="title">Adapter</span> </span>&#123;</div><div class="line">  <span class="keyword">constructor</span>() &#123;</div><div class="line">    <span class="keyword">super</span>();</div><div class="line">    <span class="keyword">this</span>.name = <span class="string">'ajaxAdapter'</span>;</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">NodeAdapter</span> <span class="keyword">extends</span> <span class="title">Adapter</span> </span>&#123;</div><div class="line">  <span class="keyword">constructor</span>() &#123;</div><div class="line">    <span class="keyword">super</span>();</div><div class="line">    <span class="keyword">this</span>.name = <span class="string">'nodeAdapter'</span>;</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">HttpRequester</span> </span>&#123;</div><div class="line">  <span class="keyword">constructor</span>(adapter) &#123;</div><div class="line">    <span class="keyword">this</span>.adapter = adapter;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  fetch(url) &#123;</div><div class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.adapter.name === <span class="string">'ajaxAdapter'</span>) &#123;</div><div class="line">      <span class="keyword">return</span> makeAjaxCall(url).then(<span class="function">(<span class="params">response</span>) =&gt;</span> &#123;</div><div class="line">        <span class="comment">// transform response and return</span></div><div class="line">      &#125;);</div><div class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">this</span>.adapter.name === <span class="string">'httpNodeAdapter'</span>) &#123;</div><div class="line">      <span class="keyword">return</span> makeHttpCall(url).then(<span class="function">(<span class="params">response</span>) =&gt;</span> &#123;</div><div class="line">        <span class="comment">// transform response and return</span></div><div class="line">      &#125;);</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">makeAjaxCall</span>(<span class="params">url</span>) </span>&#123;</div><div class="line">  <span class="comment">// request and return promise</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">makeHttpCall</span>(<span class="params">url</span>) </span>&#123;</div><div class="line">  <span class="comment">// request and return promise</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><strong>Good:</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">AjaxAdapter</span> <span class="keyword">extends</span> <span class="title">Adapter</span> </span>&#123;</div><div class="line">  <span class="keyword">constructor</span>() &#123;</div><div class="line">    <span class="keyword">super</span>();</div><div class="line">    <span class="keyword">this</span>.name = <span class="string">'ajaxAdapter'</span>;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  request(url) &#123;</div><div class="line">    <span class="comment">// request and return promise</span></div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">NodeAdapter</span> <span class="keyword">extends</span> <span class="title">Adapter</span> </span>&#123;</div><div class="line">  <span class="keyword">constructor</span>() &#123;</div><div class="line">    <span class="keyword">super</span>();</div><div class="line">    <span class="keyword">this</span>.name = <span class="string">'nodeAdapter'</span>;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  request(url) &#123;</div><div class="line">    <span class="comment">// request and return promise</span></div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">HttpRequester</span> </span>&#123;</div><div class="line">  <span class="keyword">constructor</span>(adapter) &#123;</div><div class="line">    <span class="keyword">this</span>.adapter = adapter;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  fetch(url) &#123;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.adapter.request(url).then(<span class="function">(<span class="params">response</span>) =&gt;</span> &#123;</div><div class="line">      <span class="comment">// transform response and return</span></div><div class="line">    &#125;);</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><strong><a href="#目录">⬆ 回到目录</a></strong></p>
<h3 id="Liskov替换原则-LSP"><a href="#Liskov替换原则-LSP" class="headerlink" title="Liskov替换原则 (LSP)"></a>Liskov替换原则 (LSP)</h3><p>这是针对一个非常简单的里面的一个恐怖意图， 它的正式定义是： “如果 S 是 T 的一个子类型， 那么类 型为 T 的对象可以被类型为 S 的对象替换（例如， 类型为 S 的对象可作为类型为 T 的替代品）儿不需 要修改目标程序的期望性质 （正确性、 任务执行性等）。” 这甚至是个恐怖的定义。</p>
<p>最好的解释是， 如果你又一个基类和一个子类， 那个基类和字类可以互换而不会产生不正确的结果。 这可 能还有有些疑惑， 让我们来看一下这个经典的正方形与矩形的例子。 从数学上说，一个正方形是一个矩形， 但是你用 “is-a” 的关系用继承来实现， 你将很快遇到麻烦。</p>
<p><strong>Bad:</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Rectangle</span> </span>&#123;</div><div class="line">  <span class="keyword">constructor</span>() &#123;</div><div class="line">    <span class="keyword">this</span>.width = <span class="number">0</span>;</div><div class="line">    <span class="keyword">this</span>.height = <span class="number">0</span>;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  setColor(color) &#123;</div><div class="line">    <span class="comment">// ...</span></div><div class="line">  &#125;</div><div class="line"></div><div class="line">  render(area) &#123;</div><div class="line">    <span class="comment">// ...</span></div><div class="line">  &#125;</div><div class="line"></div><div class="line">  setWidth(width) &#123;</div><div class="line">    <span class="keyword">this</span>.width = width;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  setHeight(height) &#123;</div><div class="line">    <span class="keyword">this</span>.height = height;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  getArea() &#123;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.width * <span class="keyword">this</span>.height;</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Square</span> <span class="keyword">extends</span> <span class="title">Rectangle</span> </span>&#123;</div><div class="line">  setWidth(width) &#123;</div><div class="line">    <span class="keyword">this</span>.width = width;</div><div class="line">    <span class="keyword">this</span>.height = width;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  setHeight(height) &#123;</div><div class="line">    <span class="keyword">this</span>.width = height;</div><div class="line">    <span class="keyword">this</span>.height = height;</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">renderLargeRectangles</span>(<span class="params">rectangles</span>) </span>&#123;</div><div class="line">  rectangles.forEach(<span class="function">(<span class="params">rectangle</span>) =&gt;</span> &#123;</div><div class="line">    rectangle.setWidth(<span class="number">4</span>);</div><div class="line">    rectangle.setHeight(<span class="number">5</span>);</div><div class="line">    <span class="keyword">const</span> area = rectangle.getArea(); <span class="comment">// BAD: Returns 25 for Square. Should be 20.</span></div><div class="line">    rectangle.render(area);</div><div class="line">  &#125;);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">const</span> rectangles = [<span class="keyword">new</span> Rectangle(), <span class="keyword">new</span> Rectangle(), <span class="keyword">new</span> Square()];</div><div class="line">renderLargeRectangles(rectangles);</div></pre></td></tr></table></figure></p>
<p><strong>Good:</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Shape</span> </span>&#123;</div><div class="line">  setColor(color) &#123;</div><div class="line">    <span class="comment">// ...</span></div><div class="line">  &#125;</div><div class="line"></div><div class="line">  render(area) &#123;</div><div class="line">    <span class="comment">// ...</span></div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Rectangle</span> <span class="keyword">extends</span> <span class="title">Shape</span> </span>&#123;</div><div class="line">  <span class="keyword">constructor</span>(width, height) &#123;</div><div class="line">    <span class="keyword">super</span>();</div><div class="line">    <span class="keyword">this</span>.width = width;</div><div class="line">    <span class="keyword">this</span>.height = height;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  getArea() &#123;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.width * <span class="keyword">this</span>.height;</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Square</span> <span class="keyword">extends</span> <span class="title">Shape</span> </span>&#123;</div><div class="line">  <span class="keyword">constructor</span>(length) &#123;</div><div class="line">    <span class="keyword">super</span>();</div><div class="line">    <span class="keyword">this</span>.length = length;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  getArea() &#123;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.length * <span class="keyword">this</span>.length;</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">renderLargeShapes</span>(<span class="params">shapes</span>) </span>&#123;</div><div class="line">  shapes.forEach(<span class="function">(<span class="params">shape</span>) =&gt;</span> &#123;</div><div class="line">    <span class="keyword">const</span> area = shape.getArea();</div><div class="line">    shape.render(area);</div><div class="line">  &#125;);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">const</span> shapes = [<span class="keyword">new</span> Rectangle(<span class="number">4</span>, <span class="number">5</span>), <span class="keyword">new</span> Rectangle(<span class="number">4</span>, <span class="number">5</span>), <span class="keyword">new</span> Square(<span class="number">5</span>)];</div><div class="line">renderLargeShapes(shapes);</div></pre></td></tr></table></figure></p>
<p><strong><a href="#目录">⬆ 回到目录</a></strong></p>
<h3 id="接口隔离原则-ISP"><a href="#接口隔离原则-ISP" class="headerlink" title="接口隔离原则 (ISP)"></a>接口隔离原则 (ISP)</h3><p>JavaScript 没有接口， 所以这个原则不想其它语言那么严格。 不过， 对于 JavaScript 这种缺少类 型的语言来说， 它依然是重要并且有意义的。</p>
<p>接口隔离原则说的是 “客户端不应该强制依赖他们不需要的接口。” 在 JavaScript 这种弱类型语言中， 接口是隐式的契约。</p>
<p>在 JavaScript 中能比较好的说明这个原则的是一个类需要一个巨大的配置对象。 不需要客户端去设置大 量的选项是有益的， 因为多数情况下他们不需要全部的设置。 让它们变成可选的有助于防止出现一个“胖接 口”。</p>
<p><strong>Bad:</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">DOMTraverser</span> </span>&#123;</div><div class="line">  <span class="keyword">constructor</span>(settings) &#123;</div><div class="line">    <span class="keyword">this</span>.settings = settings;</div><div class="line">    <span class="keyword">this</span>.setup();</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  setup() &#123;</div><div class="line">    <span class="keyword">this</span>.rootNode = <span class="keyword">this</span>.settings.rootNode;</div><div class="line">    <span class="keyword">this</span>.animationModule.setup();</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  traverse() &#123;</div><div class="line">    <span class="comment">// ...</span></div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">const</span> $ = <span class="keyword">new</span> DOMTraverser(&#123;</div><div class="line">  rootNode: <span class="built_in">document</span>.getElementsByTagName(<span class="string">'body'</span>),</div><div class="line">  animationModule() &#123;&#125; <span class="comment">// Most of the time, we won't need to animate when traversing.</span></div><div class="line">  <span class="comment">// ...</span></div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<p><strong>Good:</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">DOMTraverser</span> </span>&#123;</div><div class="line">  <span class="keyword">constructor</span>(settings) &#123;</div><div class="line">    <span class="keyword">this</span>.settings = settings;</div><div class="line">    <span class="keyword">this</span>.options = settings.options;</div><div class="line">    <span class="keyword">this</span>.setup();</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  setup() &#123;</div><div class="line">    <span class="keyword">this</span>.rootNode = <span class="keyword">this</span>.settings.rootNode;</div><div class="line">    <span class="keyword">this</span>.setupOptions();</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  setupOptions() &#123;</div><div class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.options.animationModule) &#123;</div><div class="line">      <span class="comment">// ...</span></div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  traverse() &#123;</div><div class="line">    <span class="comment">// ...</span></div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">const</span> $ = <span class="keyword">new</span> DOMTraverser(&#123;</div><div class="line">  rootNode: <span class="built_in">document</span>.getElementsByTagName(<span class="string">'body'</span>),</div><div class="line">  options: &#123;</div><div class="line">    animationModule() &#123;&#125;</div><div class="line">  &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<p><strong><a href="#目录">⬆ 回到目录</a></strong></p>
<h3 id="依赖反转原则-DIP"><a href="#依赖反转原则-DIP" class="headerlink" title="依赖反转原则 (DIP)"></a>依赖反转原则 (DIP)</h3><p>这个原则阐述了两个重要的事情： </p>
<ol>
<li>高级模块不应该依赖于低级模块， 两者都应该依赖与抽象； </li>
<li><ol>
<li>抽象不应当依赖于具体实现， 具体实现应当依赖于抽象。</li>
</ol>
</li>
</ol>
<p>这个一开始会很难理解， 但是如果你使用过 Angular.js ， 你应该已经看到过通过依赖注入来实现的这 个原则， 虽然他们不是相同的概念， 依赖反转原则让高级模块远离低级模块的细节和创建， 可以通过 DI 来实现。 这样做的巨大益处是降低模块间的耦合。 耦合是一个非常糟糕的开发模式， 因为会导致代码难于 重构。</p>
<p>如上所述， JavaScript 没有接口， 所以被依赖的抽象是隐式契约。 也就是说， 一个对象/类的方法和 属性直接暴露给另外一个对象/类。 在下面的例子中， 任何一个 Request 模块的隐式契约 InventoryTracker 将有一个 requestItems 方法。</p>
<blockquote>
<p>确实有点晦涩。</p>
</blockquote>
<p><strong>Bad:</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">InventoryRequester</span> </span>&#123;</div><div class="line">  <span class="keyword">constructor</span>() &#123;</div><div class="line">    <span class="keyword">this</span>.REQ_METHODS = [<span class="string">'HTTP'</span>];</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  requestItem(item) &#123;</div><div class="line">    <span class="comment">// ...</span></div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">InventoryTracker</span> </span>&#123;</div><div class="line">  <span class="keyword">constructor</span>(items) &#123;</div><div class="line">    <span class="keyword">this</span>.items = items;</div><div class="line"></div><div class="line">    <span class="comment">// BAD: We have created a dependency on a specific request implementation.</span></div><div class="line">    <span class="comment">// We should just have requestItems depend on a request method: `request`</span></div><div class="line">    <span class="keyword">this</span>.requester = <span class="keyword">new</span> InventoryRequester();</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  requestItems() &#123;</div><div class="line">    <span class="keyword">this</span>.items.forEach(<span class="function">(<span class="params">item</span>) =&gt;</span> &#123;</div><div class="line">      <span class="keyword">this</span>.requester.requestItem(item);</div><div class="line">    &#125;);</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">const</span> inventoryTracker = <span class="keyword">new</span> InventoryTracker([<span class="string">'apples'</span>, <span class="string">'bananas'</span>]);</div><div class="line">inventoryTracker.requestItems();</div></pre></td></tr></table></figure></p>
<p><strong>Good:</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">InventoryTracker</span> </span>&#123;</div><div class="line">  <span class="keyword">constructor</span>(items, requester) &#123;</div><div class="line">    <span class="keyword">this</span>.items = items;</div><div class="line">    <span class="keyword">this</span>.requester = requester;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  requestItems() &#123;</div><div class="line">    <span class="keyword">this</span>.items.forEach(<span class="function">(<span class="params">item</span>) =&gt;</span> &#123;</div><div class="line">      <span class="keyword">this</span>.requester.requestItem(item);</div><div class="line">    &#125;);</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">InventoryRequesterV1</span> </span>&#123;</div><div class="line">  <span class="keyword">constructor</span>() &#123;</div><div class="line">    <span class="keyword">this</span>.REQ_METHODS = [<span class="string">'HTTP'</span>];</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  requestItem(item) &#123;</div><div class="line">    <span class="comment">// ...</span></div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">InventoryRequesterV2</span> </span>&#123;</div><div class="line">  <span class="keyword">constructor</span>() &#123;</div><div class="line">    <span class="keyword">this</span>.REQ_METHODS = [<span class="string">'WS'</span>];</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  requestItem(item) &#123;</div><div class="line">    <span class="comment">// ...</span></div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// By constructing our dependencies externally and injecting them, we can easily</span></div><div class="line"><span class="comment">// substitute our request module for a fancy new one that uses WebSockets.</span></div><div class="line"><span class="keyword">const</span> inventoryTracker = <span class="keyword">new</span> InventoryTracker([<span class="string">'apples'</span>, <span class="string">'bananas'</span>], <span class="keyword">new</span> InventoryRequesterV2());</div><div class="line">inventoryTracker.requestItems();</div></pre></td></tr></table></figure></p>
<p><strong><a href="#目录">⬆ 回到目录</a></strong></p>
<h4 id="可测试性"><a href="#可测试性" class="headerlink" title="可测试性"></a><strong>可测试性</strong></h4><p>Testing is more important than shipping. If you have no tests or an<br>inadequate amount, then every time you ship code you won’t be sure that you<br>didn’t break anything. Deciding on what constitutes an adequate amount is up<br>to your team, but having 100% coverage (all statements and branches) is how<br>you achieve very high confidence and developer peace of mind. This means that<br>in addition to having a great testing framework, you also need to use a<br><a href="http://gotwarlost.github.io/istanbul/" target="_blank" rel="external">good coverage tool</a>.</p>
<p>There’s no excuse to not write tests. There’s [plenty of good JS test frameworks]<br>(<a href="http://jstherightway.org/#testing-tools" target="_blank" rel="external">http://jstherightway.org/#testing-tools</a>), so find one that your team prefers.<br>When you find one that works for your team, then aim to always write tests<br>for every new feature/module you introduce. If your preferred method is<br>Test Driven Development (TDD), that is great, but the main point is to just<br>make sure you are reaching your coverage goals before launching any feature,<br>or refactoring an existing one.</p>
<h3 id="Single-concept-per-test"><a href="#Single-concept-per-test" class="headerlink" title="Single concept per test"></a>Single concept per test</h3><p><strong>Bad:</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> assert <span class="keyword">from</span> <span class="string">'assert'</span>;</div><div class="line"></div><div class="line">describe(<span class="string">'MakeMomentJSGreatAgain'</span>, () =&gt; &#123;</div><div class="line">  it(<span class="string">'handles date boundaries'</span>, () =&gt; &#123;</div><div class="line">    <span class="keyword">let</span> date;</div><div class="line"></div><div class="line">    date = <span class="keyword">new</span> MakeMomentJSGreatAgain(<span class="string">'1/1/2015'</span>);</div><div class="line">    date.addDays(<span class="number">30</span>);</div><div class="line">    assert.equal(<span class="string">'1/31/2015'</span>, date);</div><div class="line"></div><div class="line">    date = <span class="keyword">new</span> MakeMomentJSGreatAgain(<span class="string">'2/1/2016'</span>);</div><div class="line">    date.addDays(<span class="number">28</span>);</div><div class="line">    assert.equal(<span class="string">'02/29/2016'</span>, date);</div><div class="line"></div><div class="line">    date = <span class="keyword">new</span> MakeMomentJSGreatAgain(<span class="string">'2/1/2015'</span>);</div><div class="line">    date.addDays(<span class="number">28</span>);</div><div class="line">    assert.equal(<span class="string">'03/01/2015'</span>, date);</div><div class="line">  &#125;);</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<p><strong>Good:</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> assert <span class="keyword">from</span> <span class="string">'assert'</span>;</div><div class="line"></div><div class="line">describe(<span class="string">'MakeMomentJSGreatAgain'</span>, () =&gt; &#123;</div><div class="line">  it(<span class="string">'handles 30-day months'</span>, () =&gt; &#123;</div><div class="line">    <span class="keyword">const</span> date = <span class="keyword">new</span> MakeMomentJSGreatAgain(<span class="string">'1/1/2015'</span>);</div><div class="line">    date.addDays(<span class="number">30</span>);</div><div class="line">    assert.equal(<span class="string">'1/31/2015'</span>, date);</div><div class="line">  &#125;);</div><div class="line"></div><div class="line">  it(<span class="string">'handles leap year'</span>, () =&gt; &#123;</div><div class="line">    <span class="keyword">const</span> date = <span class="keyword">new</span> MakeMomentJSGreatAgain(<span class="string">'2/1/2016'</span>);</div><div class="line">    date.addDays(<span class="number">28</span>);</div><div class="line">    assert.equal(<span class="string">'02/29/2016'</span>, date);</div><div class="line">  &#125;);</div><div class="line"></div><div class="line">  it(<span class="string">'handles non-leap year'</span>, () =&gt; &#123;</div><div class="line">    <span class="keyword">const</span> date = <span class="keyword">new</span> MakeMomentJSGreatAgain(<span class="string">'2/1/2015'</span>);</div><div class="line">    date.addDays(<span class="number">28</span>);</div><div class="line">    assert.equal(<span class="string">'03/01/2015'</span>, date);</div><div class="line">  &#125;);</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<p><strong><a href="#目录">⬆ 回到目录</a></strong></p>
<h4 id="并发性"><a href="#并发性" class="headerlink" title="并发性"></a><strong>并发性</strong></h4><h3 id="使用-Promises而不是callback"><a href="#使用-Promises而不是callback" class="headerlink" title="使用 Promises而不是callback"></a>使用 Promises而不是callback</h3><p>回调不够简洁， 因为他们会产生过多的嵌套。 在 ES2015/ES6 中， Promises 已经是内置的全局类型 了，使用它们吧！</p>
<p><strong>Bad:</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; get &#125; <span class="keyword">from</span> <span class="string">'request'</span>;</div><div class="line"><span class="keyword">import</span> &#123; writeFile &#125; <span class="keyword">from</span> <span class="string">'fs'</span>;</div><div class="line"></div><div class="line">get(<span class="string">'https://en.wikipedia.org/wiki/Robert_Cecil_Martin'</span>, (requestErr, response) =&gt; &#123;</div><div class="line">  <span class="keyword">if</span> (requestErr) &#123;</div><div class="line">    <span class="built_in">console</span>.error(requestErr);</div><div class="line">  &#125; <span class="keyword">else</span> &#123;</div><div class="line">    writeFile(<span class="string">'article.html'</span>, response.body, (writeErr) =&gt; &#123;</div><div class="line">      <span class="keyword">if</span> (writeErr) &#123;</div><div class="line">        <span class="built_in">console</span>.error(writeErr);</div><div class="line">      &#125; <span class="keyword">else</span> &#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'File written'</span>);</div><div class="line">      &#125;</div><div class="line">    &#125;);</div><div class="line">  &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<p><strong>Good:</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; get &#125; <span class="keyword">from</span> <span class="string">'request'</span>;</div><div class="line"><span class="keyword">import</span> &#123; writeFile &#125; <span class="keyword">from</span> <span class="string">'fs'</span>;</div><div class="line"></div><div class="line">get(<span class="string">'https://en.wikipedia.org/wiki/Robert_Cecil_Martin'</span>)</div><div class="line">  .then(<span class="function">(<span class="params">response</span>) =&gt;</span> &#123;</div><div class="line">    <span class="keyword">return</span> writeFile(<span class="string">'article.html'</span>, response);</div><div class="line">  &#125;)</div><div class="line">  .then(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'File written'</span>);</div><div class="line">  &#125;)</div><div class="line">  .catch(<span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</div><div class="line">    <span class="built_in">console</span>.error(err);</div><div class="line">  &#125;);</div></pre></td></tr></table></figure></p>
<p><strong><a href="#目录">⬆ 回到目录</a></strong></p>
<h3 id="Async-Await-比-Promises-更加简洁"><a href="#Async-Await-比-Promises-更加简洁" class="headerlink" title="Async/Await 比 Promises 更加简洁"></a>Async/Await 比 Promises 更加简洁</h3><p>Promises 是回调的一个非常简洁的替代品， 但是 ES2017/ES8 带来的 async 和 await 提供了一个 更加简洁的解决方案。 你需要的只是一个前缀为 async 关键字的函数， 接下来就可以不需要 then 函数链来编写逻辑了。 如果你能使用 ES2017/ES8 的高级功能的话， 今天就使用它吧！</p>
<p><strong>Bad:</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; get &#125; <span class="keyword">from</span> <span class="string">'request-promise'</span>;</div><div class="line"><span class="keyword">import</span> &#123; writeFile &#125; <span class="keyword">from</span> <span class="string">'fs-promise'</span>;</div><div class="line"></div><div class="line">get(<span class="string">'https://en.wikipedia.org/wiki/Robert_Cecil_Martin'</span>)</div><div class="line">  .then(<span class="function">(<span class="params">response</span>) =&gt;</span> &#123;</div><div class="line">    <span class="keyword">return</span> writeFile(<span class="string">'article.html'</span>, response);</div><div class="line">  &#125;)</div><div class="line">  .then(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'File written'</span>);</div><div class="line">  &#125;)</div><div class="line">  .catch(<span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</div><div class="line">    <span class="built_in">console</span>.error(err);</div><div class="line">  &#125;);</div></pre></td></tr></table></figure></p>
<p><strong>Good:</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; get &#125; <span class="keyword">from</span> <span class="string">'request-promise'</span>;</div><div class="line"><span class="keyword">import</span> &#123; writeFile &#125; <span class="keyword">from</span> <span class="string">'fs-promise'</span>;</div><div class="line"></div><div class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">getCleanCodeArticle</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">try</span> &#123;</div><div class="line">    <span class="keyword">const</span> response = <span class="keyword">await</span> get(<span class="string">'https://en.wikipedia.org/wiki/Robert_Cecil_Martin'</span>);</div><div class="line">    <span class="keyword">await</span> writeFile(<span class="string">'article.html'</span>, response);</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'File written'</span>);</div><div class="line">  &#125; <span class="keyword">catch</span>(err) &#123;</div><div class="line">    <span class="built_in">console</span>.error(err);</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><strong><a href="#目录">⬆ 回到目录</a></strong></p>
<h4 id="容错性"><a href="#容错性" class="headerlink" title="容错性"></a><strong>容错性</strong></h4><p>抛出错误是一件好事情！ 他们意味着当你的程序有错时运行时可以成功确认， 并且通过停止执行当前堆栈 上的函数来让你知道， 结束当前进程（在 Node 中）， 在控制台中用一个堆栈跟踪提示你。</p>
<h3 id="不要忽略捕捉错误"><a href="#不要忽略捕捉错误" class="headerlink" title="不要忽略捕捉错误"></a>不要忽略捕捉错误</h3><p>对捕捉到的错误不做任何处理不能给你修复错误或者响应错误的能力。 向控制台记录错误 (console.log) 也不怎么好， 因为往往会丢失在海量的控制台输出中。 如果你把任意一段代码用 try/catch 包装那就 意味着你想到这里可能会错， 因此你应该有个修复计划， 或者当错误发生时有一个代码路径。</p>
<p><strong>Bad:</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">try</span> &#123;</div><div class="line">  functionThatMightThrow();</div><div class="line">&#125; <span class="keyword">catch</span> (error) &#123;</div><div class="line">  <span class="built_in">console</span>.log(error);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><strong>Good:</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">try</span> &#123;</div><div class="line">  functionThatMightThrow();</div><div class="line">&#125; <span class="keyword">catch</span> (error) &#123;</div><div class="line">  <span class="comment">// One option (more noisy than console.log):</span></div><div class="line">  <span class="built_in">console</span>.error(error);</div><div class="line">  <span class="comment">// Another option:</span></div><div class="line">  notifyUserOfError(error);</div><div class="line">  <span class="comment">// Another option:</span></div><div class="line">  reportErrorToService(error);</div><div class="line">  <span class="comment">// OR do all three!</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h3 id="不要忽略被拒绝的-promise"><a href="#不要忽略被拒绝的-promise" class="headerlink" title="不要忽略被拒绝的 promise"></a>不要忽略被拒绝的 promise</h3><p>与你不应忽略来自 try/catch 的错误的原因相同。</p>
<p><strong>Bad:</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">getdata()</div><div class="line">  .then(<span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</div><div class="line">    functionThatMightThrow(data);</div><div class="line">  &#125;)</div><div class="line">  .catch(<span class="function">(<span class="params">error</span>) =&gt;</span> &#123;</div><div class="line">    <span class="built_in">console</span>.log(error);</div><div class="line">  &#125;);</div></pre></td></tr></table></figure></p>
<p><strong>Good:</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">getdata()</div><div class="line">  .then(<span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</div><div class="line">    functionThatMightThrow(data);</div><div class="line">  &#125;)</div><div class="line">  .catch(<span class="function">(<span class="params">error</span>) =&gt;</span> &#123;</div><div class="line">    <span class="comment">// One option (more noisy than console.log):</span></div><div class="line">    <span class="built_in">console</span>.error(error);</div><div class="line">    <span class="comment">// Another option:</span></div><div class="line">    notifyUserOfError(error);</div><div class="line">    <span class="comment">// Another option:</span></div><div class="line">    reportErrorToService(error);</div><div class="line">    <span class="comment">// OR do all three!</span></div><div class="line">  &#125;);</div></pre></td></tr></table></figure></p>
<p><strong><a href="#目录">⬆ 回到目录</a></strong></p>
<h4 id="格式化"><a href="#格式化" class="headerlink" title="格式化"></a><strong>格式化</strong></h4><p>格式化是主观的。 就像其它规则一样， 没有必须让你遵守的硬性规则。 重点是不要因为格式去争论， 这 里有大量的工具来自动格式化， 使用其中的一个即可！因为做为工程师去争论格式化就是在浪费时间和金钱。</p>
<p>针对自动格式化工具不能涵盖的问题（缩进、 制表符还是空格、 双引号还是单引号等），这里有一些指南。</p>
<blockquote>
<p>在IDE里找个格式化代码的插件，简单省事。</p>
</blockquote>
<h3 id="保持大小写一致"><a href="#保持大小写一致" class="headerlink" title="保持大小写一致"></a>保持大小写一致</h3><p>JavaScript 是无类型的， 所以大小写告诉你关于你的变量、 函数等的很多事情。 这些规则是主观的， 所以你的团队可以选择他们想要的。 重点是， 不管你们选择了什么， 要保持一致。</p>
<p><strong>Bad:</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> DAYS_IN_WEEK = <span class="number">7</span>;</div><div class="line"><span class="keyword">const</span> daysInMonth = <span class="number">30</span>;</div><div class="line"></div><div class="line"><span class="keyword">const</span> songs = [<span class="string">'Back In Black'</span>, <span class="string">'Stairway to Heaven'</span>, <span class="string">'Hey Jude'</span>];</div><div class="line"><span class="keyword">const</span> Artists = [<span class="string">'ACDC'</span>, <span class="string">'Led Zeppelin'</span>, <span class="string">'The Beatles'</span>];</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">eraseDatabase</span>(<span class="params"></span>) </span>&#123;&#125;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">restore_database</span>(<span class="params"></span>) </span>&#123;&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">animal</span> </span>&#123;&#125;</div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Alpaca</span> </span>&#123;&#125;</div></pre></td></tr></table></figure></p>
<p><strong>Good:</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> DAYS_IN_WEEK = <span class="number">7</span>;</div><div class="line"><span class="keyword">const</span> DAYS_IN_MONTH = <span class="number">30</span>;</div><div class="line"></div><div class="line"><span class="keyword">const</span> songs = [<span class="string">'Back In Black'</span>, <span class="string">'Stairway to Heaven'</span>, <span class="string">'Hey Jude'</span>];</div><div class="line"><span class="keyword">const</span> artists = [<span class="string">'ACDC'</span>, <span class="string">'Led Zeppelin'</span>, <span class="string">'The Beatles'</span>];</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">eraseDatabase</span>(<span class="params"></span>) </span>&#123;&#125;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">restoreDatabase</span>(<span class="params"></span>) </span>&#123;&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Animal</span> </span>&#123;&#125;</div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Alpaca</span> </span>&#123;&#125;</div></pre></td></tr></table></figure></p>
<p><strong><a href="#目录">⬆ 回到目录</a></strong></p>
<h3 id="函数的调用方与被调用方应该靠近"><a href="#函数的调用方与被调用方应该靠近" class="headerlink" title="函数的调用方与被调用方应该靠近"></a>函数的调用方与被调用方应该靠近</h3><p>如果一个函数调用另一个， 则在代码中这两个函数的竖直位置应该靠近。 理想情况下，保持被调用函数在被 调用函数的正上方。 我们倾向于从上到下阅读代码， 就像读一章报纸。 由于这个原因， 保持你的代码可 以按照这种方式阅读。</p>
<p><strong>Bad:</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">PerformanceReview</span> </span>&#123;</div><div class="line">  <span class="keyword">constructor</span>(employee) &#123;</div><div class="line">    <span class="keyword">this</span>.employee = employee;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  lookupPeers() &#123;</div><div class="line">    <span class="keyword">return</span> db.lookup(<span class="keyword">this</span>.employee, <span class="string">'peers'</span>);</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  lookupManager() &#123;</div><div class="line">    <span class="keyword">return</span> db.lookup(<span class="keyword">this</span>.employee, <span class="string">'manager'</span>);</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  getPeerReviews() &#123;</div><div class="line">    <span class="keyword">const</span> peers = <span class="keyword">this</span>.lookupPeers();</div><div class="line">    <span class="comment">// ...</span></div><div class="line">  &#125;</div><div class="line"></div><div class="line">  perfReview() &#123;</div><div class="line">    <span class="keyword">this</span>.getPeerReviews();</div><div class="line">    <span class="keyword">this</span>.getManagerReview();</div><div class="line">    <span class="keyword">this</span>.getSelfReview();</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  getManagerReview() &#123;</div><div class="line">    <span class="keyword">const</span> manager = <span class="keyword">this</span>.lookupManager();</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  getSelfReview() &#123;</div><div class="line">    <span class="comment">// ...</span></div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">const</span> review = <span class="keyword">new</span> PerformanceReview(user);</div><div class="line">review.perfReview();</div></pre></td></tr></table></figure></p>
<p><strong>Good:</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">PerformanceReview</span> </span>&#123;</div><div class="line">  <span class="keyword">constructor</span>(employee) &#123;</div><div class="line">    <span class="keyword">this</span>.employee = employee;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  perfReview() &#123;</div><div class="line">    <span class="keyword">this</span>.getPeerReviews();</div><div class="line">    <span class="keyword">this</span>.getManagerReview();</div><div class="line">    <span class="keyword">this</span>.getSelfReview();</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  getPeerReviews() &#123;</div><div class="line">    <span class="keyword">const</span> peers = <span class="keyword">this</span>.lookupPeers();</div><div class="line">    <span class="comment">// ...</span></div><div class="line">  &#125;</div><div class="line"></div><div class="line">  lookupPeers() &#123;</div><div class="line">    <span class="keyword">return</span> db.lookup(<span class="keyword">this</span>.employee, <span class="string">'peers'</span>);</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  getManagerReview() &#123;</div><div class="line">    <span class="keyword">const</span> manager = <span class="keyword">this</span>.lookupManager();</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  lookupManager() &#123;</div><div class="line">    <span class="keyword">return</span> db.lookup(<span class="keyword">this</span>.employee, <span class="string">'manager'</span>);</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  getSelfReview() &#123;</div><div class="line">    <span class="comment">// ...</span></div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">const</span> review = <span class="keyword">new</span> PerformanceReview(employee);</div><div class="line">review.perfReview();</div></pre></td></tr></table></figure></p>
<p><strong><a href="#目录">⬆ 回到目录</a></strong></p>
<h4 id="注释"><a href="#注释" class="headerlink" title="注释"></a><strong>注释</strong></h4><h3 id="仅仅对包含复杂业务逻辑的东西进行注释"><a href="#仅仅对包含复杂业务逻辑的东西进行注释" class="headerlink" title="仅仅对包含复杂业务逻辑的东西进行注释"></a>仅仅对包含复杂业务逻辑的东西进行注释</h3><p>注释是代码的解释， 不是要求。 多数情况下， 好的代码就是文档。</p>
<p><strong>Bad:</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">hashIt</span>(<span class="params">data</span>) </span>&#123;</div><div class="line">  <span class="comment">// The hash</span></div><div class="line">  <span class="keyword">let</span> hash = <span class="number">0</span>;</div><div class="line"></div><div class="line">  <span class="comment">// Length of string</span></div><div class="line">  <span class="keyword">const</span> length = data.length;</div><div class="line"></div><div class="line">  <span class="comment">// Loop through every character in data</span></div><div class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; length; i++) &#123;</div><div class="line">    <span class="comment">// Get character code.</span></div><div class="line">    <span class="keyword">const</span> char = data.charCodeAt(i);</div><div class="line">    <span class="comment">// Make the hash</span></div><div class="line">    hash = ((hash &lt;&lt; <span class="number">5</span>) - hash) + char;</div><div class="line">    <span class="comment">// Convert to 32-bit integer</span></div><div class="line">    hash &amp;= hash;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><strong>Good:</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">hashIt</span>(<span class="params">data</span>) </span>&#123;</div><div class="line">  <span class="keyword">let</span> hash = <span class="number">0</span>;</div><div class="line">  <span class="keyword">const</span> length = data.length;</div><div class="line"></div><div class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; length; i++) &#123;</div><div class="line">    <span class="keyword">const</span> char = data.charCodeAt(i);</div><div class="line">    hash = ((hash &lt;&lt; <span class="number">5</span>) - hash) + char;</div><div class="line"></div><div class="line">    <span class="comment">// Convert to 32-bit integer</span></div><div class="line">    hash &amp;= hash;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><strong><a href="#目录">⬆ 回到目录</a></strong></p>
<h3 id="不要在代码库中保存注释掉的代码"><a href="#不要在代码库中保存注释掉的代码" class="headerlink" title="不要在代码库中保存注释掉的代码"></a>不要在代码库中保存注释掉的代码</h3><p>因为有版本控制， 把旧的代码留在历史记录即可。</p>
<p><strong>Bad:</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">doStuff();</div><div class="line"><span class="comment">// doOtherStuff();</span></div><div class="line"><span class="comment">// doSomeMoreStuff();</span></div><div class="line"><span class="comment">// doSoMuchStuff();</span></div></pre></td></tr></table></figure></p>
<p><strong>Good:</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">doStuff();</div></pre></td></tr></table></figure></p>
<p><strong><a href="#目录">⬆ 回到目录</a></strong></p>
<h3 id="不要有日志式的评论"><a href="#不要有日志式的评论" class="headerlink" title="不要有日志式的评论"></a>不要有日志式的评论</h3><p>记住， 使用版本控制！ 不需要僵尸代码， 注释调的代码， 尤其是日志式的评论。 使用 git log 来 获取历史记录。</p>
<p><strong>Bad:</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> * 2016-12-20: Removed monads, didn't understand them (RM)</span></div><div class="line"><span class="comment"> * 2016-10-01: Improved using special monads (JP)</span></div><div class="line"><span class="comment"> * 2016-02-03: Removed type-checking (LI)</span></div><div class="line"><span class="comment"> * 2015-03-14: Added combine with type-checking (JR)</span></div><div class="line"><span class="comment"> */</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">combine</span>(<span class="params">a, b</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> a + b;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><strong>Good:</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">combine</span>(<span class="params">a, b</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> a + b;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><strong><a href="#目录">⬆ 回到目录</a></strong></p>
<h3 id="避免不必要的占位符"><a href="#避免不必要的占位符" class="headerlink" title="避免不必要的占位符"></a>避免不必要的占位符</h3><p>它们仅仅添加了干扰。 让函数和变量名称与合适的缩进和格式化为你的代码提供视觉结构。</p>
<p><strong>Bad:</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="comment">////////////////////////////////////////////////////////////////////////////////</span></div><div class="line"><span class="comment">// Scope Model Instantiation</span></div><div class="line"><span class="comment">////////////////////////////////////////////////////////////////////////////////</span></div><div class="line">$scope.model = &#123;</div><div class="line">  menu: <span class="string">'foo'</span>,</div><div class="line">  nav: <span class="string">'bar'</span></div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="comment">////////////////////////////////////////////////////////////////////////////////</span></div><div class="line"><span class="comment">// Action setup</span></div><div class="line"><span class="comment">////////////////////////////////////////////////////////////////////////////////</span></div><div class="line"><span class="keyword">const</span> actions = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="comment">// ...</span></div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<p><strong>Good:</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">$scope.model = &#123;</div><div class="line">  menu: <span class="string">'foo'</span>,</div><div class="line">  nav: <span class="string">'bar'</span></div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="keyword">const</span> actions = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="comment">// ...</span></div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<p><strong><a href="#目录">⬆ 回到目录</a></strong></p>

  </div>
</article>

    <div class="blog-post-comments">
        <div id="disqus_thread">
            <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        </div>
    </div>



    </div>
    
      <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/archives/">Posts</a></li>
         
          <li><a href="/tags/">Tags</a></li>
         
          <li><a href="/about/">About</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#代码整洁之道"><span class="toc-number">1.</span> <span class="toc-text">代码整洁之道</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#目录"><span class="toc-number">1.0.1.</span> <span class="toc-text">目录</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#简介"><span class="toc-number">1.0.2.</span> <span class="toc-text">简介</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#变量"><span class="toc-number">1.0.3.</span> <span class="toc-text">变量</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#使用有意义且可读性好的变量命名"><span class="toc-number">1.1.</span> <span class="toc-text">使用有意义且可读性好的变量命名</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#对功能类似的变量名采用统一的命名风格"><span class="toc-number">1.2.</span> <span class="toc-text">对功能类似的变量名采用统一的命名风格</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#使用可检索的名字"><span class="toc-number">1.3.</span> <span class="toc-text">使用可检索的名字</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#使用解释性的变量命名"><span class="toc-number">1.4.</span> <span class="toc-text">使用解释性的变量命名</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#避免绕弯子"><span class="toc-number">1.5.</span> <span class="toc-text">避免绕弯子</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#避免重复描述"><span class="toc-number">1.6.</span> <span class="toc-text">避免重复描述</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#避免无意义的循环和条件判断"><span class="toc-number">1.7.</span> <span class="toc-text">避免无意义的循环和条件判断</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#函数"><span class="toc-number">1.7.1.</span> <span class="toc-text">函数</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#函数参数最多不超过两个"><span class="toc-number">1.8.</span> <span class="toc-text">函数参数最多不超过两个</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#保持函数功能单一性"><span class="toc-number">1.9.</span> <span class="toc-text">保持函数功能单一性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#函数命名应该突显出它的功能"><span class="toc-number">1.10.</span> <span class="toc-text">函数命名应该突显出它的功能</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Functions-should-only-be-one-level-of-abstraction"><span class="toc-number">1.11.</span> <span class="toc-text">Functions should only be one level of abstraction</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#保持函数只有一层抽象"><span class="toc-number">1.12.</span> <span class="toc-text">保持函数只有一层抽象</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#避免冗余代码"><span class="toc-number">1.13.</span> <span class="toc-text">避免冗余代码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#使用-Object-assign-设置对象属性"><span class="toc-number">1.14.</span> <span class="toc-text">使用 Object.assign 设置对象属性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#不要用标志位作为函数参数"><span class="toc-number">1.15.</span> <span class="toc-text">不要用标志位作为函数参数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#避免副作用-part-1"><span class="toc-number">1.16.</span> <span class="toc-text">避免副作用(part 1)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#避免副作用-part-2"><span class="toc-number">1.17.</span> <span class="toc-text">避免副作用 (part 2)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#不要写全局函数"><span class="toc-number">1.18.</span> <span class="toc-text">不要写全局函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#函数编程优于指令式编程"><span class="toc-number">1.19.</span> <span class="toc-text">函数编程优于指令式编程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#封装条件语句"><span class="toc-number">1.20.</span> <span class="toc-text">封装条件语句</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#避免否定情况的判断"><span class="toc-number">1.21.</span> <span class="toc-text">避免否定情况的判断</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#避免switch-case"><span class="toc-number">1.22.</span> <span class="toc-text">避免switch case</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#避免类型检测-part-1"><span class="toc-number">1.23.</span> <span class="toc-text">避免类型检测 (part 1)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#避免类型检测-part-2"><span class="toc-number">1.24.</span> <span class="toc-text">避免类型检测 (part 2)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#不要过度优化"><span class="toc-number">1.25.</span> <span class="toc-text">不要过度优化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#移除僵尸代码"><span class="toc-number">1.26.</span> <span class="toc-text">移除僵尸代码</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#对象和数据结构"><span class="toc-number">1.26.1.</span> <span class="toc-text">对象和数据结构</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Use-getters-and-setters"><span class="toc-number">1.27.</span> <span class="toc-text">Use getters and setters</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#让对象拥有私有成员"><span class="toc-number">1.28.</span> <span class="toc-text">让对象拥有私有成员</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#类"><span class="toc-number">1.28.1.</span> <span class="toc-text">类</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ES2015-ES6-类优先与-ES5-纯函数"><span class="toc-number">1.29.</span> <span class="toc-text">ES2015/ES6 类优先与 ES5 纯函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#使用方法链"><span class="toc-number">1.30.</span> <span class="toc-text">使用方法链</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#组合优先于继承"><span class="toc-number">1.31.</span> <span class="toc-text">组合优先于继承</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#健壮性"><span class="toc-number">1.31.1.</span> <span class="toc-text">健壮性</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#单一职责原则-SRP"><span class="toc-number">1.32.</span> <span class="toc-text">单一职责原则 (SRP)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#开闭原则-OCP"><span class="toc-number">1.33.</span> <span class="toc-text">开闭原则  (OCP)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Liskov替换原则-LSP"><span class="toc-number">1.34.</span> <span class="toc-text">Liskov替换原则 (LSP)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#接口隔离原则-ISP"><span class="toc-number">1.35.</span> <span class="toc-text">接口隔离原则 (ISP)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#依赖反转原则-DIP"><span class="toc-number">1.36.</span> <span class="toc-text">依赖反转原则 (DIP)</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#可测试性"><span class="toc-number">1.36.1.</span> <span class="toc-text">可测试性</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Single-concept-per-test"><span class="toc-number">1.37.</span> <span class="toc-text">Single concept per test</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#并发性"><span class="toc-number">1.37.1.</span> <span class="toc-text">并发性</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#使用-Promises而不是callback"><span class="toc-number">1.38.</span> <span class="toc-text">使用 Promises而不是callback</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Async-Await-比-Promises-更加简洁"><span class="toc-number">1.39.</span> <span class="toc-text">Async/Await 比 Promises 更加简洁</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#容错性"><span class="toc-number">1.39.1.</span> <span class="toc-text">容错性</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#不要忽略捕捉错误"><span class="toc-number">1.40.</span> <span class="toc-text">不要忽略捕捉错误</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#不要忽略被拒绝的-promise"><span class="toc-number">1.41.</span> <span class="toc-text">不要忽略被拒绝的 promise</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#格式化"><span class="toc-number">1.41.1.</span> <span class="toc-text">格式化</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#保持大小写一致"><span class="toc-number">1.42.</span> <span class="toc-text">保持大小写一致</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#函数的调用方与被调用方应该靠近"><span class="toc-number">1.43.</span> <span class="toc-text">函数的调用方与被调用方应该靠近</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#注释"><span class="toc-number">1.43.1.</span> <span class="toc-text">注释</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#仅仅对包含复杂业务逻辑的东西进行注释"><span class="toc-number">1.44.</span> <span class="toc-text">仅仅对包含复杂业务逻辑的东西进行注释</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#不要在代码库中保存注释掉的代码"><span class="toc-number">1.45.</span> <span class="toc-text">不要在代码库中保存注释掉的代码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#不要有日志式的评论"><span class="toc-number">1.46.</span> <span class="toc-text">不要有日志式的评论</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#避免不必要的占位符"><span class="toc-number">1.47.</span> <span class="toc-text">避免不必要的占位符</span></a></li></ol></li></ol>
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=http://yoursite.com/posts/2017-02-13-cleancodejavascript/"><i class="fa fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=http://yoursite.com/posts/2017-02-13-cleancodejavascript/&text=代码整洁之道"><i class="fa fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=http://yoursite.com/posts/2017-02-13-cleancodejavascript/&title=代码整洁之道"><i class="fa fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=http://yoursite.com/posts/2017-02-13-cleancodejavascript/&is_video=false&description=代码整洁之道"><i class="fa fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=代码整洁之道&body=Check out this article: http://yoursite.com/posts/2017-02-13-cleancodejavascript/"><i class="fa fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=http://yoursite.com/posts/2017-02-13-cleancodejavascript/&title=代码整洁之道"><i class="fa fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=http://yoursite.com/posts/2017-02-13-cleancodejavascript/&title=代码整洁之道"><i class="fa fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=http://yoursite.com/posts/2017-02-13-cleancodejavascript/&title=代码整洁之道"><i class="fa fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=http://yoursite.com/posts/2017-02-13-cleancodejavascript/&title=代码整洁之道"><i class="fa fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=http://yoursite.com/posts/2017-02-13-cleancodejavascript/&name=代码整洁之道&description="><i class="fa fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
      <ul>
        <li id="toc"><a class="icon" href="#" onclick='$("#toc-footer").toggle();return false;'><i class="fa fa-list fa-lg" aria-hidden="true"></i> TOC</a></li>
        <li id="share"><a class="icon" href="#" onclick='$("#share-footer").toggle();return false;'><i class="fa fa-share-alt fa-lg" aria-hidden="true"></i> Share</a></li>
        <li id="top" style="display:none"><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a></li>
        <li id="menu"><a class="icon" href="#" onclick='$("#nav-footer").toggle();return false;'><i class="fa fa-bars fa-lg" aria-hidden="true"></i> Menu</a></li>
      </ul>
    </div>

  </div>
</div>

    
    <footer id="footer">
  <div class="footer-left">
    Copyright &copy; 2017 jizhi.w77@foxmail.com
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/archives/">Posts</a></li>
         
          <li><a href="/tags/">Tags</a></li>
         
          <li><a href="/about/">About</a></li>
        
      </ul>
    </nav>
  </div>
</footer>

</body>
</html>
<!-- styles -->
<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">
<link rel="stylesheet" href="/lib/meslo-LG/styles.css">
<!--imagelightbox-->
<link rel="stylesheet" href="/lib/imagelightbox/imagelightbox.min.css">
<!-- jquery -->
<script src="/lib/jquery/jquery.min.js"></script>
<script src="/js/main.js"></script>
<!--zoomimage-->
<script src="/lib/imagelightbox/imagelightbox.min.js"></script>

<script>
    $( function()
    {
        $('p img').imageLightbox({overlay:true});
    });
</script>
<!-- Google Analytics -->

    <script type="text/javascript">
        (function(i,s,o,g,r,a,m) {i['GoogleAnalyticsObject']=r;i[r]=i[r]||function() {
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
        ga('create', 'UA-104402094-1', 'auto');
        ga('send', 'pageview');
    </script>

<!-- Baidu Analytics -->

<script>
    var _hmt = _hmt || [];
    (function() {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?ecdaf6decc458931c22046a191fed7dc>";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
    })();
</script>

<!-- Disqus Comments -->

    <script type="text/javascript">
        var disqus_shortname = 'kitty-site';

        (function(){
            var dsq = document.createElement('script');
            dsq.type = 'text/javascript';
            dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        }());
    </script>


